import{d as we,u as ie,r as z,g as k,a as P,c as n,o,b as e,n as j,f as T,F as f,e as y,h as r,q as C,t as i,s as re,x as q,k as Te,y as Ce,z as oe,p as Me,m as ne}from"./chunks/filters-COTahWfs.js";import Ve from"/images/icons/train-station_color.png";import $e from"/images/icons/bicycle_color.png";import Ae from"/images/icons/rock-climbing_color.png";function D(p){const{velo_km:t,velo_dplus:l,velo_apieduniquement:g}=p;let v;return g===1?v=t/4+l/500:v=t/20+l/500,Math.round(v*60)}const L=we("tableau",()=>{const p=ie(),t=z([]),l=z(null),g=z(!1),v=z({key:"total",dir:"asc"});function h(x){t.value=x.falaises,l.value=x.villeId,g.value=!0}function u(x,b){v.value={key:x,dir:b}}function c(x){v.value.key===x?v.value.dir=v.value.dir==="asc"?"desc":"asc":v.value={key:x,dir:"asc"}}function m(x){const b=Math.min(...x.map(w=>w.temps_total||0)),d=Math.min(...x.map(w=>w.train_temps||0)),A=Math.min(...x.map(w=>D(w))),S=x[0].falaise_nbvoies||0,M=x[0].falaise_maa||0;return{minTotal:b,minTrain:d,minVelo:A,nbVoies:S,approche:M}}function _(x){const b=p.filters,d=x[0],A=b.exposition.includes("N"),S=b.exposition.includes("E"),M=b.exposition.includes("S"),w=b.exposition.includes("O"),N=b.exposition.length>0,a=b.cotations.length>0,s=b.cotations.includes("40"),F=b.cotations.includes("50"),R=b.cotations.includes("59"),ce=b.cotations.includes("60"),de=b.cotations.includes("69"),ue=b.cotations.includes("70"),pe=b.cotations.includes("79"),ve=b.cotations.includes("80"),{couenne:G,grandeVoie:U,bloc:Z,psychobloc:J}=b.typeVoies,be=G||U||Z||J,{tempsMax:K,distMax:Q,denivMax:W,apiedPossible:fe}=b.velo,{tempsMax:X,correspMax:Y,terOnly:me}=b.train,ee=Y!==null?Y:10,{tempsMax:se}=b.approche,{tempsTV:te,tempsTVA:le}=b.total,ae=b.nbVoiesMin,_e=(!s||"4+".localeCompare(d.falaise_cotmin)>=0)&&(!F||"5-".localeCompare(d.falaise_cotmin)>=0&&d.falaise_cotmax.localeCompare("5-")>=0)&&(!R||"5+".localeCompare(d.falaise_cotmin)>=0&&d.falaise_cotmax.localeCompare("5+")>=0)&&(!ce||"6-".localeCompare(d.falaise_cotmin)>=0&&d.falaise_cotmax.localeCompare("6-")>=0)&&(!de||"6+".localeCompare(d.falaise_cotmin)>=0&&d.falaise_cotmax.localeCompare("6+")>=0)&&(!ue||"7-".localeCompare(d.falaise_cotmin)>=0&&d.falaise_cotmax.localeCompare("7-")>=0)&&(!pe||"7+".localeCompare(d.falaise_cotmin)>=0&&d.falaise_cotmax.localeCompare("7+")>=0)&&(!ve||d.falaise_cotmax.localeCompare("8-")>=0),xe=d.falaise_nbvoies>=ae||ae===0,he=G&&!d.falaise_bloc||U&&!!d.falaise_gvnb||Z&&d.falaise_bloc===1||J&&d.falaise_bloc===2,ge=x.some($=>{const H=D($);return(!me||($.train_tgv||0)===0)&&(X===null||$.train_temps<=X)&&(ee===10||$.train_correspmax<=ee)&&(te===null||$.train_temps+H<=te)&&(le===null||$.temps_total<=le)}),ye=!N||!!(A&&(d.falaise_exposhort1.includes("'N")||d.falaise_exposhort2.includes("'N"))||S&&(d.falaise_exposhort1.match(/('E|'NE'|'SE')/)||d.falaise_exposhort2.match(/('E|'NE'|'SE')/))||M&&(d.falaise_exposhort1.includes("'S")||d.falaise_exposhort2.includes("'S"))||w&&(d.falaise_exposhort1.match(/('O|'NO'|'SO')/)||d.falaise_exposhort2.match(/('O|'NO'|'SO')/))),ke=x.some($=>{const H=D($);return(K===null||H<=K)&&(W===null||$.velo_dplus<=W)&&(Q===null||$.velo_km<=Q)&&(!fe||$.velo_apieduniquement===1||$.velo_apiedpossible===1)});return ye&&(!a||_e)&&xe&&(se===null||(d.falaise_maa||0)<=se)&&(!be||he)&&ge&&ke}const V=k(()=>t.value.filter(x=>_(x))),O=k(()=>{const x=[...V.value];return x.sort((b,d)=>{const A=m(b),S=m(d);let M=0,w=0;switch(v.value.key){case"total":M=A.minTotal,w=S.minTotal;break;case"train":M=A.minTrain,w=S.minTrain;break;case"velo":M=A.minVelo,w=S.minVelo;break;case"voies":M=A.nbVoies,w=S.nbVoies;break;case"approche":M=A.approche,w=S.approche;break}const N=M===w?0:M<w?-1:1;return v.value.dir==="asc"?N:-N}),x}),I=k(()=>t.value.length),B=k(()=>V.value.length);return{falaises:t,villeId:l,isInitialized:g,sort:v,sortedFalaises:O,totalCount:I,filteredCount:B,initialize:h,setSort:u,toggleSort:c,calculateVeloTime:D}}),Se={class:"flex flex-col md:flex-row gap-1 items-center w-full max-w-full justify-center flex-wrap"},Ne={class:"flex gap-1 items-center"},Ee={class:"dropdown w-fit"},Oe={class:"dropdown-content menu gap-1 bg-base-200 rounded-box z-[1] m-1 w-64 p-2 shadow-lg",tabindex:"1"},Fe={class:"flex flex-col gap-2"},je={class:"flex flex-col gap-3"},De={class:"flex flex-col gap-1"},Pe=["checked","onChange"],ze={class:"label-text"},Ie={class:"label cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},Be=["value"],He=["value"],qe={class:"grid grid-cols-[auto_auto] gap-x-2 gap-y-1 w-full"},Le={class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},Re=["checked","onChange"],Ge={class:"label-text"},Ue={class:"dropdown w-fit"},Ze={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-40 p-2 shadow-lg",tabindex:"1"},Je={class:"flex flex-row gap-1 items-center"},Ke={class:"max-w-96 flex flex-col gap-1 w-full"},Qe=["checked","onChange"],We={class:"label-text"},Xe={class:"text-xs text-slate-400"},Ye={class:"dropdown w-fit"},es={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-52 p-2 shadow-lg",tabindex:"1"},ss={class:"flex flex-col gap-2"},ts=["value"],ls=["value"],as=["value"],os=["value"],ns={class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 justify-start"},is=["checked"],rs={class:"flex gap-1 items-center"},cs={class:"dropdown w-fit"},ds={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-52 p-2 shadow-lg",tabindex:"1"},us={class:"flex flex-col gap-2"},ps=["value"],vs=["value"],bs=["value"],fs=["value"],ms=["value"],_s=["value"],xs={class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 justify-start"},hs=["checked"],gs={class:"dropdown w-fit"},ys={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-48 p-2 shadow-lg",tabindex:"1"},ks={class:"flex flex-col gap-2"},ws=["value"],Ts=["value"],Cs={class:"dropdown w-fit"},Ms={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-52 p-2 shadow-lg",tabindex:"1"},Vs={class:"flex flex-col gap-2"},$s=["value"],As=["value"],Ss=["value"],Ns=["value"],Es=P({__name:"TableauFilterPanel",setup(p){const t=ie(),l=[{id:"N",label:"Nord",hint:"(NO, N, NE)"},{id:"E",label:"Est",hint:"(NE, E, SE)"},{id:"S",label:"Sud",hint:"(SE, S, SO)"},{id:"O",label:"Ouest",hint:"(SO, O, NO)"}],g=[[{id:"40",label:"4 et -"}],[{id:"50",label:"5-"},{id:"59",label:"5+"}],[{id:"60",label:"6-"},{id:"69",label:"6+"}],[{id:"70",label:"7-"},{id:"79",label:"7+"}],[{id:"80",label:"8 et +"}]],v=[{id:"couenne",label:"Couenne"},{id:"grandeVoie",label:"Grandes voies"},{id:"bloc",label:"Bloc"},{id:"psychobloc",label:"Psychobloc"}],h=[{value:null,label:"Pas de maximum"},{value:60,label:"Moins de 1h"},{value:120,label:"Moins de 2h"},{value:180,label:"Moins de 3h"},{value:240,label:"Moins de 4h"}],u=[{value:null,label:"Peu importe"},{value:0,label:"Direct"},{value:1,label:"1 max"},{value:2,label:"2 max"}],c=[{value:null,label:"Pas de maximum"},{value:30,label:"Moins de 30'"},{value:60,label:"Moins de 1h"},{value:90,label:"Moins de 1h30"}],m=[{value:null,label:"Pas de maximum"},{value:10,label:"Moins de 10km"},{value:20,label:"Moins de 20km"},{value:30,label:"Moins de 30km"}],_=[{value:null,label:"Pas de maximum"},{value:200,label:"Moins de 200m"},{value:400,label:"Moins de 400m"},{value:600,label:"Moins de 600m"}],V=[{value:null,label:"Pas de maximum"},{value:10,label:"Moins de 10'"},{value:20,label:"Moins de 20'"},{value:30,label:"Moins de 30'"}],O=[{value:null,label:"Pas de maximum"},{value:120,label:"Moins de 2h"},{value:180,label:"Moins de 3h"},{value:240,label:"Moins de 4h"},{value:300,label:"Moins de 5h"}],I=[{value:0,label:"Pas de minimum"},{value:20,label:"Plus de 20"},{value:50,label:"Plus de 50"},{value:100,label:"Plus de 100"},{value:200,label:"Plus de 200"}],B=k(()=>t.filters.exposition.length>0),x=k(()=>t.filters.cotations.length>0||t.filters.typeVoies.couenne||t.filters.typeVoies.grandeVoie||t.filters.typeVoies.bloc||t.filters.typeVoies.psychobloc||t.filters.nbVoiesMin>0),b=k(()=>t.filters.train.tempsMax!==null||t.filters.train.correspMax!==null||t.filters.train.terOnly),d=k(()=>t.filters.velo.tempsMax!==null||t.filters.velo.distMax!==null||t.filters.velo.denivMax!==null||t.filters.velo.apiedPossible),A=k(()=>t.filters.approche.tempsMax!==null),S=k(()=>t.filters.total.tempsTV!==null||t.filters.total.tempsTVA!==null);function M(N){return t.filters.exposition.includes(N)}function w(N){return t.filters.cotations.includes(N)}return(N,a)=>(o(),n("div",Se,[e("div",Ne,[e("div",Ee,[e("div",{tabindex:"0",role:"button",class:j(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":x.value}])}," Voies ðŸ§—â€â™€ï¸ ",2),e("div",Oe,[e("div",Fe,[e("div",je,[a[13]||(a[13]=e("div",null,[e("span",{class:"font-bold"},"Cotations"),T(" (ex: 5+ ET 6+)")],-1)),e("div",De,[(o(),n(f,null,y(g,s=>e("div",{key:s[0].id,class:"flex flex-row gap-4"},[(o(!0),n(f,null,y(s,F=>(o(),n("label",{key:F.id,class:j(["label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1",{"w-16 justify-start":s.length>1}])},[e("input",{type:"checkbox",checked:w(F.id),class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:R=>r(t).toggleCotation(F.id)},null,40,Pe),e("span",ze,i(F.label),1)],2))),128))])),64)),a[12]||(a[12]=e("span",{class:"italic text-base-300 text-sm"},"(5- = de 5a Ã  5b, 5+ = de 5b+ Ã  5c+)",-1))])])]),a[14]||(a[14]=e("div",{class:"font-bold"},"Nombre de voies",-1)),e("div",null,[e("label",Ie,[e("select",{class:"select border-base-300 select-sm focus:outline-base-300",value:r(t).filters.nbVoiesMin,onChange:a[0]||(a[0]=s=>r(t).setNbVoiesMin(Number(s.target.value)))},[(o(),n(f,null,y(I,s=>e("option",{key:s.value,value:s.value},i(s.label),9,He)),64))],40,Be)])]),a[15]||(a[15]=e("div",{class:"font-bold"},"Types de voies",-1)),e("div",qe,[(o(),n(f,null,y(v,s=>e("div",{key:s.id,class:"flex flex-row gap-2 items-center w-full"},[e("label",Le,[e("input",{type:"checkbox",checked:r(t).filters.typeVoies[s.id],class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:F=>r(t).setTypeVoie(s.id,!r(t).filters.typeVoies[s.id])},null,40,Re),e("span",Ge,i(s.label),1)])])),64))])])]),e("div",Ue,[e("div",{tabindex:"0",role:"button",class:j(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":B.value}])}," Exposition ðŸ”… ",2),e("div",Ze,[e("div",Je,[e("div",Ke,[(o(),n(f,null,y(l,s=>e("label",{key:s.id,class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},[e("input",{type:"checkbox",checked:M(s.id),class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:F=>r(t).toggleExposition(s.id)},null,40,Qe),e("span",We,[T(i(s.label)+" ",1),e("span",Xe,i(s.hint),1)])])),64))])])])]),e("div",Ye,[e("div",{tabindex:"0",role:"button",class:j(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":b.value}])}," Train ðŸšž ",2),e("div",es,[e("div",ss,[a[17]||(a[17]=e("div",{class:"font-bold"},"Temps de trajet",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.train.tempsMax??"",onChange:a[1]||(a[1]=s=>r(t).setTrainTempsMax(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(h,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,ls)),64))],40,ts),a[18]||(a[18]=e("div",{class:"font-bold"},"Correspondances",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.train.correspMax??"",onChange:a[2]||(a[2]=s=>r(t).setTrainCorrespMax(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(u,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,os)),64))],40,as),e("label",ns,[e("input",{type:"checkbox",checked:r(t).filters.train.terOnly,class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:a[3]||(a[3]=s=>r(t).setTrainTerOnly(!r(t).filters.train.terOnly))},null,40,is),a[16]||(a[16]=e("span",{class:"label-text"},"TER uniquement",-1))])])])])]),e("div",rs,[e("div",cs,[e("div",{tabindex:"0",role:"button",class:j(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":d.value}])}," VÃ©lo ðŸš² ",2),e("div",ds,[e("div",us,[a[20]||(a[20]=e("div",{class:"font-bold"},"Temps de trajet",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.velo.tempsMax??"",onChange:a[4]||(a[4]=s=>r(t).setVeloTempsMax(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(c,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,vs)),64))],40,ps),a[21]||(a[21]=e("div",{class:"font-bold"},"Distance",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.velo.distMax??"",onChange:a[5]||(a[5]=s=>r(t).setVeloDistMax(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(m,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,fs)),64))],40,bs),a[22]||(a[22]=e("div",{class:"font-bold"},"DÃ©nivelÃ©",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.velo.denivMax??"",onChange:a[6]||(a[6]=s=>r(t).setVeloDenivMax(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(_,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,_s)),64))],40,ms),e("label",xs,[e("input",{type:"checkbox",checked:r(t).filters.velo.apiedPossible,class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:a[7]||(a[7]=s=>r(t).setVeloApiedPossible(!r(t).filters.velo.apiedPossible))},null,40,hs),a[19]||(a[19]=e("span",{class:"label-text"},"AccÃ¨s Ã  pied possible",-1))])])])]),e("div",gs,[e("div",{tabindex:"0",role:"button",class:j(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":A.value}])}," Marche ðŸ¥¾ ",2),e("div",ys,[e("div",ks,[a[23]||(a[23]=e("div",{class:"font-bold"},"Temps de marche",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.approche.tempsMax??"",onChange:a[8]||(a[8]=s=>r(t).setApprocheTempsMax(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(V,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,Ts)),64))],40,ws)])])]),e("div",Cs,[e("div",{tabindex:"0",role:"button",class:j(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":S.value}])}," Total â±ï¸ ",2),e("div",Ms,[e("div",Vs,[a[24]||(a[24]=e("div",{class:"font-bold"},"Train + VÃ©lo",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.total.tempsTV??"",onChange:a[9]||(a[9]=s=>r(t).setTotalTempsTV(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(O,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,As)),64))],40,$s),a[25]||(a[25]=e("div",{class:"font-bold"},"Train + VÃ©lo + Approche",-1)),e("select",{class:"select border-base-300 select-sm focus:outline-base-300 w-full",value:r(t).filters.total.tempsTVA??"",onChange:a[10]||(a[10]=s=>r(t).setTotalTempsTVA(s.target.value?Number(s.target.value):null))},[(o(),n(f,null,y(O,s=>e("option",{key:String(s.value),value:s.value??""},i(s.label),9,Ns)),64))],40,Ss)])])]),r(t).hasActiveFilters?(o(),n("button",{key:0,type:"button",class:"btn btn-sm btn-ghost text-primary",onClick:a[11]||(a[11]=s=>r(t).resetFilters())},[...a[26]||(a[26]=[e("svg",{class:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 4C14.7486 4 17.1749 5.38626 18.6156 7.5H16V9.5H22V3.5H20V5.99936C18.1762 3.57166 15.2724 2 12 2C6.47715 2 2 6.47715 2 12H4C4 7.58172 7.58172 4 12 4ZM20 12C20 16.4183 16.4183 20 12 20C9.25144 20 6.82508 18.6137 5.38443 16.5H8V14.5H2V20.5H4V18.0006C5.82381 20.4283 8.72764 22 12 22C17.5228 22 22 17.5228 22 12H20Z"})],-1),T(" RÃ©initialiser ",-1)])])):C("",!0)])]))}});function E(p){if(p==null)return"";const t=Math.floor(p/60),l=p%60;return t>0?`${t}h${l.toString().padStart(2,"0")}`:`${l}'`}const Os={10:"0-20 voies",20:"~20 voies",35:"20-50 voies",50:"~50 voies",75:"50-100 voies",100:"~100 voies",150:"100-200 voies",200:"~200 voies",350:"200-500 voies",500:"~500 voies",1e3:"500+ voies"};function Fs(p){return Os[p]||"Voies"}const js=["href"],Ds={class:"flex flex-col rounded-lg shadow-xl bg-base-100 p-2 text-sm"},Ps={class:"flex flex-row justify-between gap-1"},zs={class:"text-xl font-bold text-primary hover:underline"},Is={key:0,class:"text-error font-normal"},Bs={class:"font-bold text-xl"},Hs={class:"w-full flex flex-row items-center justify-between gap-2"},qs={class:"flex flex-col items-start justify-start flex-grow"},Ls={key:0,class:"text-accent"},Rs={key:1,class:"text-accent"},Gs={key:2,class:"text-accent"},Us={key:0},Zs={key:1},Js=["id"],Ks={class:"w-full"},Qs={class:"border-base-300"},Ws={class:"list-disc list-inside"},Xs={key:0,class:"badge badge-accent badge-sm",title:"Trajet empruntant un segment TGV"},Ys={title:"D=Direct / C=Correspondances"},et=P({__name:"FalaiseMobileCard",props:{falaise:{},villeId:{}},setup(p){const t=p,l=k(()=>t.falaise[0]),g=k(()=>`rose-mobile-${l.value.falaise_id}`);re(()=>{typeof roseFromExpo=="function"&&roseFromExpo(g.value,l.value.falaise_exposhort1,l.value.falaise_exposhort2,72,72)});function v(h){const u=h.train_correspmin===0?"D":`${h.train_correspmin}C`,c=h.train_correspmax===0||h.train_correspmax===h.train_correspmin?"":`/${h.train_correspmax}C`;return u+c}return(h,u)=>(o(),n("a",{href:`/falaise.php?falaise_id=${l.value.falaise_id}&ville_id=${p.villeId}`,class:"text-base-content hover:no-underline font-normal"},[e("div",Ds,[e("div",Ps,[e("h3",zs,[T(i(l.value.falaise_nom)+" ",1),l.value.falaise_fermee?(o(),n("span",Is,"Falaise Interdite")):C("",!0)]),e("div",Bs,i(r(E)(l.value.temps_total)),1)]),e("div",Hs,[e("div",qs,[e("div",null,[u[0]||(u[0]=e("b",null,"Zone",-1)),T(" : "+i(l.value.zone_nom),1)]),e("div",null,[u[1]||(u[1]=e("b",{title:"Cotations (6-: 6a Ã  6b, 6+: 6b+ Ã  6c+ etc.)"},"Cotations",-1)),u[2]||(u[2]=T(" : ",-1)),e("span",null,"de "+i(l.value.falaise_cotmin)+" Ã  "+i(l.value.falaise_cotmax),1)]),l.value.falaise_gvnb?(o(),n("div",Ls,i(l.value.falaise_gvnb),1)):C("",!0),l.value.falaise_bloc===1?(o(),n("div",Rs,"Secteur de bloc")):l.value.falaise_bloc===2?(o(),n("div",Gs,"Psychobloc")):C("",!0),e("div",null,[u[3]||(u[3]=e("b",{title:"Marche d'approche"},"Marche d'approche",-1)),u[4]||(u[4]=T(" : ",-1)),l.value.falaise_maa>0?(o(),n("span",Us,i(r(E)(l.value.falaise_maa)),1)):(o(),n("span",Zs,"Aucune"))])]),e("div",{id:g.value,class:"w-[72px]"},null,8,Js)]),e("div",Ks,[e("div",Qs,[e("b",null,"Acces depuis "+i(l.value.ville_nom)+" :",1)]),e("ul",Ws,[(o(!0),n(f,null,y(p.falaise,(c,m)=>(o(),n("li",{key:m},[c.train_temps>0?(o(),n(f,{key:0},[c.train_tgv?(o(),n("span",Xs,"TGV")):C("",!0),T(" Train pour "+i(c.train_arrivee)+" ("+i(r(E)(c.train_temps))+", ",1),e("span",Ys,i(v(c)),1),u[5]||(u[5]=T(") + ",-1))],64)):C("",!0),T(" "+i(r(E)(r(D)(c)))+" "+i(c.velo_apieduniquement===1?"A pied":"a velo")+" ",1),c.variante_a_pied===1?(o(),n(f,{key:1},[u[6]||(u[6]=e("br",null,null,-1)),u[7]||(u[7]=e("span",{class:"text-primary"},"Aussi accessible a pied",-1))],64)):C("",!0)]))),128))])])])],8,js))}}),st={class:"bg-base-100 px-2 py-1 self-stretch font-bold flex flex-col items-center justify-center text-base"},tt=["href"],lt={key:0,class:"text-error text-sm font-normal"},at={key:1,class:"font-normal text-xs"},ot={class:"text-base font-bold"},nt={key:0,class:"badge badge-accent badge-sm",title:"Trajet empruntant un segment TGV"},it={title:"D=Direct / C=Correspondances"},rt={class:"text-nowrap"},ct={class:"text-base font-bold"},dt={key:0,class:"text-primary"},ut={key:1,class:"text-primary"},pt={class:"bg-base-100 px-2 py-1 self-stretch flex flex-row items-center justify-end gap-2"},vt={class:"flex flex-col items-center justify-center gap-1 flex-grow"},bt={class:"font-bold"},ft={class:"font-bold"},mt={class:"font-bold",title:"Cotations (6-: 6a a 6b, 6+: 6b+ a 6c+ etc.)"},_t={key:0,class:"text-accent"},xt={key:1,class:"text-accent"},ht={key:2,class:"text-accent"},gt=["id"],yt=P({__name:"FalaiseDesktopRow",props:{falaise:{},villeId:{}},setup(p){const t=p,l=k(()=>t.falaise[0]),g=k(()=>`rose-${l.value.falaise_id}`);re(()=>{typeof roseFromExpo=="function"&&roseFromExpo(g.value,l.value.falaise_exposhort1,l.value.falaise_exposhort2,72,72)});function v(c){const m=c.train_correspmin===0?"D":`${c.train_correspmin}C`,_=c.train_correspmax===0||c.train_correspmax===c.train_correspmin?"":`/${c.train_correspmax}C`;return m+_}function h(c){return E(D(c))}function u(c){const{velo_km:m,velo_dmoins:_,velo_apieduniquement:V}=c;let O;return V===1?O=m/4+_/500:O=m/20+_/500,E(Math.round(O*60))}return(c,m)=>(o(),n(f,null,[e("div",st,[e("div",null,[e("a",{href:`/falaise.php?falaise_id=${l.value.falaise_id}&ville_id=${p.villeId}`},i(l.value.falaise_nom),9,tt),l.value.falaise_fermee?(o(),n("div",lt,"Falaise Interdite")):C("",!0),l.value.zone_nom?(o(),n("div",at,"("+i(l.value.zone_nom)+")",1)):C("",!0)])]),e("div",{class:"font-bold bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:q({gridTemplateRows:`repeat(${p.falaise.length}, 1fr)`})},[(o(!0),n(f,null,y(p.falaise,(_,V)=>(o(),n("div",{key:V,class:"self-stretch flex flex-col justify-center py-2 px-2"},i(r(E)(r(D)(_)+_.train_temps+l.value.falaise_maa)),1))),128))],4),e("div",{class:"bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:q({gridTemplateRows:`repeat(${p.falaise.length}, 1fr)`})},[(o(!0),n(f,null,y(p.falaise,(_,V)=>(o(),n("div",{key:V,class:"self-stretch flex flex-col justify-center py-2 px-2"},[_.train_temps>0?(o(),n(f,{key:0},[e("div",ot,[_.train_tgv?(o(),n("span",nt,"TGV")):C("",!0),T(" "+i(r(E)(_.train_temps))+" ",1),e("span",it,"("+i(v(_))+")",1)]),e("div",rt,i(_.train_arrivee),1)],64)):(o(),n(f,{key:1},[T(" Pas de train a prendre ")],64))]))),128))],4),e("div",{class:"bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:q({gridTemplateRows:`repeat(${p.falaise.length}, 1fr)`})},[(o(!0),n(f,null,y(p.falaise,(_,V)=>(o(),n("div",{key:V,class:"self-stretch flex flex-col justify-center py-2 px-2"},[e("div",ct," Aller : "+i(h(_))+" - Retour : "+i(u(_)),1),e("div",null,i(_.velo_km)+" km, "+i(_.velo_dplus)+" D+, "+i(_.velo_dmoins)+" D-",1),_.velo_apieduniquement===1?(o(),n("div",dt,"A pied uniquement")):C("",!0),_.variante_a_pied===1?(o(),n("div",ut,"Aussi accessible a pied")):C("",!0)]))),128))],4),e("div",pt,[e("div",vt,[e("div",null,[m[0]||(m[0]=e("span",{title:"Marche d'approche"},"Marche d'approche",-1)),m[1]||(m[1]=T(" : ",-1)),e("span",bt,[l.value.falaise_maa>0?(o(),n(f,{key:0},[T(i(r(E)(l.value.falaise_maa)),1)],64)):(o(),n(f,{key:1},[T("Aucune")],64))])]),e("div",null,[e("span",ft,i(r(Fs)(l.value.falaise_nbvoies)),1),m[2]||(m[2]=T(" de ",-1)),e("span",mt,i(l.value.falaise_cotmin)+" a "+i(l.value.falaise_cotmax),1)]),l.value.falaise_gvnb?(o(),n("div",_t,i(l.value.falaise_gvnb),1)):C("",!0),l.value.falaise_bloc===1?(o(),n("div",xt,"Secteur de bloc")):l.value.falaise_bloc===2?(o(),n("div",ht,"Psychobloc")):C("",!0)]),e("div",{id:g.value,class:"w-[72px]"},null,8,gt)])],64))}}),kt={class:"dropdown dropdown-end w-fit"},wt={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-48 p-2 shadow-lg items-start",tabindex:"1"},Tt=["onClick"],Ct=P({__name:"SortDropdown",setup(p){const t=L(),l=[{key:"total",dir:"asc",label:"Temps total"},{key:"total",dir:"desc",label:"Temps total"},{key:"train",dir:"asc",label:"Temps Train"},{key:"train",dir:"desc",label:"Temps Train"},{key:"velo",dir:"asc",label:"Temps Velo"},{key:"velo",dir:"desc",label:"Temps Velo"},{key:"voies",dir:"asc",label:"Nb voies"},{key:"voies",dir:"desc",label:"Nb voies"},{key:"approche",dir:"asc",label:"Approche"},{key:"approche",dir:"desc",label:"Approche"}];function g(h){return t.sort.key===h.key&&t.sort.dir===h.dir}function v(h){t.setSort(h.key,h.dir)}return(h,u)=>(o(),n("div",kt,[u[2]||(u[2]=e("div",{tabindex:"0",role:"button",class:"btn btn-sm text-nowrap focus:pointer-events-none"}," Tri ",-1)),e("div",wt,[u[0]||(u[0]=e("div",{class:"font-bold"},"Trier par",-1)),u[1]||(u[1]=e("hr",{class:"w-1/2 bg-base-300 mb-1 mt-2 mx-auto"},null,-1)),e("ul",null,[(o(),n(f,null,y(l,c=>e("li",{key:`${c.key}-${c.dir}`},[e("a",{class:j(["p-1 justify-start",{"font-bold text-primary":g(c),"font-normal text-base-content":!g(c)}]),onClick:m=>v(c)},i(c.label)+" "+i(c.dir==="asc"?"â†—":"â†˜"),11,Tt)])),64))])])]))}}),Mt={class:"flex flex-col gap-4"},Vt={class:"flex justify-between w-full items-center"},$t={id:"nbFalaisesInFilter",class:"text-primary text-sm font-bold"},At={class:"flex flex-col gap-4 md:hidden"},St={key:0,class:"bg-base-100 text-center w-full py-4 font-bold rounded-lg shadow-lg"},Nt={class:"hidden md:grid grid-cols-[1.5fr_60px_1fr_2fr_2fr] gap-[1px] bg-base-300 shadow-xl rounded-lg overflow-hidden text-center items-center text-sm"},Et={key:0,class:"bg-base-100 text-center w-full col-span-5 py-4 font-bold"},Ot=P({__name:"TableauList",setup(p){const t=L(),l=k(()=>t.sortedFalaises),g=k(()=>t.villeId??0),v=k(()=>t.filteredCount),h=k(()=>v.value>0);return(u,c)=>(o(),n("div",Mt,[e("div",Vt,[e("div",$t,i(v.value)+" falaises ",1),Te(Ct)]),e("div",At,[(o(!0),n(f,null,y(l.value,m=>(o(),oe(et,{key:m[0].falaise_id,falaise:m,"ville-id":g.value},null,8,["falaise","ville-id"]))),128)),h.value?C("",!0):(o(),n("div",St," Aucune falaise ne correspond aux filtres. "))]),e("div",Nt,[c[0]||(c[0]=Ce('<div class="bg-base-100 px-2 py-1 self-stretch flex items-center justify-center vg-desktop-header"></div><div class="bg-base-100 px-1 py-1 self-stretch flex items-center justify-center font-bold text-xs vg-desktop-header"> Temps total (T+V+A) </div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Train" src="'+Ve+'"></div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Velo" src="'+$e+'"></div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Escalade" src="'+Ae+'"></div>',5)),(o(!0),n(f,null,y(l.value,m=>(o(),oe(yt,{key:m[0].falaise_id,falaise:m,"ville-id":g.value},null,8,["falaise","ville-id"]))),128)),h.value?C("",!0):(o(),n("div",Et," Aucune falaise ne correspond aux filtres. "))])]))}});document.addEventListener("DOMContentLoaded",()=>{const p=document.getElementById("vue-filters"),t=document.getElementById("vue-tableau");if(!p&&!t){console.warn("[velogrimpe] No mount points found for tableau");return}const l=Me();if(p){const v=ne(Es);v.use(l),v.mount(p),console.log("[velogrimpe] Vue tableau filters mounted")}if(t){const v=ne(Ot);v.use(l),v.mount(t),console.log("[velogrimpe] Vue tableau list mounted")}const g=L(l);window.__TABLEAU_DATA__?(g.initialize(window.__TABLEAU_DATA__),console.log("[velogrimpe] Tableau store initialized with",window.__TABLEAU_DATA__.falaises.length,"falaises")):console.warn("[velogrimpe] No tableau data found on window.__TABLEAU_DATA__")});
