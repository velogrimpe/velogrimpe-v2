import{d as we,u as le,r as j,g as h,a as F,c as a,o as n,b as e,n as E,f as w,F as g,e as M,h as i,q as y,t as d,s as oe,x as P,k as Te,y as $e,z as te,p as Ce,m as se}from"./chunks/filters-COTahWfs.js";function S(p){const{velo_km:s,velo_dplus:l,velo_apieduniquement:_}=p;let b;return _===1?b=s/4+l/500:b=s/20+l/500,Math.round(b*60)}const B=we("tableau",()=>{const p=le(),s=j([]),l=j(null),_=j(!1),b=j({key:"total",dir:"asc"});function x(f){s.value=f.falaises,l.value=f.villeId,_.value=!0}function u(f,c){b.value={key:f,dir:c}}function r(f){b.value.key===f?b.value.dir=b.value.dir==="asc"?"desc":"asc":b.value={key:f,dir:"asc"}}function v(f){const c=Math.min(...f.map(T=>T.temps_total||0)),t=Math.min(...f.map(T=>T.train_temps||0)),o=Math.min(...f.map(T=>S(T))),k=f[0].falaise_nbvoies||0,C=f[0].falaise_maa||0;return{minTotal:c,minTrain:t,minVelo:o,nbVoies:k,approche:C}}function m(f){const c=p.filters,t=f[0],o=c.exposition.includes("N"),k=c.exposition.includes("E"),C=c.exposition.includes("S"),T=c.exposition.includes("O"),O=c.exposition.length>0,ne=c.cotations.length>0,ae=c.cotations.includes("40"),ie=c.cotations.includes("50"),re=c.cotations.includes("59"),de=c.cotations.includes("60"),ce=c.cotations.includes("69"),ue=c.cotations.includes("70"),pe=c.cotations.includes("79"),fe=c.cotations.includes("80"),{couenne:H,grandeVoie:R,bloc:q,psychobloc:L}=c.typeVoies,be=H||R||q||L,{tempsMax:G,distMax:U,denivMax:Z,apiedPossible:ve}=c.velo,{tempsMax:K,correspMax:J,terOnly:me}=c.train,Q=J!==null?J:10,{tempsMax:W}=c.approche,{tempsTV:X,tempsTVA:Y}=c.total,ee=c.nbVoiesMin,xe=(!ae||"4+".localeCompare(t.falaise_cotmin)>=0)&&(!ie||"5-".localeCompare(t.falaise_cotmin)>=0&&t.falaise_cotmax.localeCompare("5-")>=0)&&(!re||"5+".localeCompare(t.falaise_cotmin)>=0&&t.falaise_cotmax.localeCompare("5+")>=0)&&(!de||"6-".localeCompare(t.falaise_cotmin)>=0&&t.falaise_cotmax.localeCompare("6-")>=0)&&(!ce||"6+".localeCompare(t.falaise_cotmin)>=0&&t.falaise_cotmax.localeCompare("6+")>=0)&&(!ue||"7-".localeCompare(t.falaise_cotmin)>=0&&t.falaise_cotmax.localeCompare("7-")>=0)&&(!pe||"7+".localeCompare(t.falaise_cotmin)>=0&&t.falaise_cotmax.localeCompare("7+")>=0)&&(!fe||t.falaise_cotmax.localeCompare("8-")>=0),_e=t.falaise_nbvoies>=ee||ee===0,ge=H&&!t.falaise_bloc||R&&!!t.falaise_gvnb||q&&t.falaise_bloc===1||L&&t.falaise_bloc===2,he=f.some(V=>{const z=S(V);return(!me||(V.train_tgv||0)===0)&&(K===null||V.train_temps<=K)&&(Q===10||V.train_correspmax<=Q)&&(X===null||V.train_temps+z<=X)&&(Y===null||V.temps_total<=Y)}),ye=!O||!!(o&&(t.falaise_exposhort1.includes("'N")||t.falaise_exposhort2.includes("'N"))||k&&(t.falaise_exposhort1.match(/('E|'NE'|'SE')/)||t.falaise_exposhort2.match(/('E|'NE'|'SE')/))||C&&(t.falaise_exposhort1.includes("'S")||t.falaise_exposhort2.includes("'S"))||T&&(t.falaise_exposhort1.match(/('O|'NO'|'SO')/)||t.falaise_exposhort2.match(/('O|'NO'|'SO')/))),ke=f.some(V=>{const z=S(V);return(G===null||z<=G)&&(Z===null||V.velo_dplus<=Z)&&(U===null||V.velo_km<=U)&&(!ve||V.velo_apieduniquement===1||V.velo_apiedpossible===1)});return ye&&(!ne||xe)&&_e&&(W===null||(t.falaise_maa||0)<=W)&&(!be||ge)&&he&&ke}const $=h(()=>s.value.filter(f=>m(f))),N=h(()=>{const f=[...$.value];return f.sort((c,t)=>{const o=v(c),k=v(t);let C=0,T=0;switch(b.value.key){case"total":C=o.minTotal,T=k.minTotal;break;case"train":C=o.minTrain,T=k.minTrain;break;case"velo":C=o.minVelo,T=k.minVelo;break;case"voies":C=o.nbVoies,T=k.nbVoies;break;case"approche":C=o.approche,T=k.approche;break}const O=C===T?0:C<T?-1:1;return b.value.dir==="asc"?O:-O}),f}),I=h(()=>s.value.length),D=h(()=>$.value.length);return{falaises:s,villeId:l,isInitialized:_,sort:b,sortedFalaises:N,totalCount:I,filteredCount:D,initialize:x,setSort:u,toggleSort:r,calculateVeloTime:S}}),Ve={class:"flex flex-col md:flex-row gap-1 items-center w-full max-w-full justify-center flex-wrap"},Me={class:"flex gap-1 items-center"},Ae={class:"dropdown w-fit"},Ee={class:"dropdown-content menu gap-1 bg-base-200 rounded-box z-[1] m-1 w-64 p-2 shadow-lg",tabindex:"1"},Ne={class:"flex flex-col gap-2"},Se={class:"flex flex-col gap-3"},Fe={class:"flex flex-col gap-1"},Oe=["checked","onChange"],je={class:"label-text"},Ie={class:"label cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},De=["value"],ze=["value"],Pe={class:"grid grid-cols-[auto_auto] gap-x-2 gap-y-1 w-full"},Be={class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},He=["checked","onChange"],Re={class:"label-text"},qe={class:"dropdown w-fit"},Le={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-40 p-2 shadow-lg",tabindex:"1"},Ge={class:"flex flex-row gap-1 items-center"},Ue={class:"max-w-96 flex flex-col gap-1 w-full"},Ze=["checked","onChange"],Ke={class:"label-text"},Je={class:"text-xs text-slate-400"},Qe={class:"dropdown w-fit dropdown-end"},We={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-64 p-2 shadow-lg",tabindex:"1"},Xe={class:"flex flex-row gap-2 items-center"},Ye=["value"],et={class:"flex flex-row items-center gap-1 mt-2"},tt={class:"flex flex-row gap-2 items-center"},st={class:"label cursor-pointer gap-1"},lt=["checked"],ot={class:"label cursor-pointer gap-1"},nt=["checked"],at={class:"form-control cursor-pointer"},it={class:"label gap-2 p-0 justify-start"},rt=["checked"],dt={class:"flex gap-1 items-center"},ct={class:"dropdown w-fit"},ut={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-64 p-2 shadow-lg",tabindex:"1"},pt={class:"flex flex-row gap-3 items-center"},ft={class:"flex flex-col gap-1"},bt={class:"flex flex-row gap-2 flex-wrap items-center"},vt=["value"],mt={class:"flex flex-row gap-2 items-center"},xt=["value"],_t={class:"flex flex-row gap-2 items-center"},gt=["value"],ht={class:"flex flex-row gap-2 items-center mt-2"},yt={class:"flex flex-row gap-2 items-center hover:bg-base-300 rounded-lg cursor-pointer p-0 pr-1"},kt=["checked"],wt={class:"dropdown w-fit"},Tt={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-56 p-2 shadow-lg",tabindex:"1"},$t={class:"flex flex-row gap-2 items-center"},Ct=["value"],Vt={class:"dropdown w-fit dropdown-end"},Mt={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 p-2 shadow-lg",tabindex:"1"},At={class:"flex flex-col gap-2 items-end"},Et={class:"flex flex-row gap-1 items-center"},Nt=["value"],St={class:"flex flex-row gap-1 items-center"},Ft=["value"],Ot=F({__name:"TableauFilterPanel",setup(p){const s=le(),l=[{id:"N",label:"Nord",hint:"(NO, N, NE)"},{id:"E",label:"Est",hint:"(NE, E, SE)"},{id:"S",label:"Sud",hint:"(SE, S, SO)"},{id:"O",label:"Ouest",hint:"(SO, O, NO)"}],_=[[{id:"40",label:"4 et -"}],[{id:"50",label:"5-"},{id:"59",label:"5+"}],[{id:"60",label:"6-"},{id:"69",label:"6+"}],[{id:"70",label:"7-"},{id:"79",label:"7+"}],[{id:"80",label:"8 et +"}]],b=[{id:"couenne",label:"Couenne"},{id:"grandeVoie",label:"Grandes voies"},{id:"bloc",label:"Bloc"},{id:"psychobloc",label:"Psychobloc"}],x=[{value:0,label:"Pas de minimum"},{value:20,label:"Plus de 20"},{value:50,label:"Plus de 50"},{value:100,label:"Plus de 100"},{value:200,label:"Plus de 200"}],u=h(()=>s.filters.exposition.length>0),r=h(()=>s.filters.cotations.length>0||s.filters.typeVoies.couenne||s.filters.typeVoies.grandeVoie||s.filters.typeVoies.bloc||s.filters.typeVoies.psychobloc||s.filters.nbVoiesMin>0),v=h(()=>s.filters.train.tempsMax!==null||s.filters.train.correspMax!==null||s.filters.train.terOnly),m=h(()=>s.filters.velo.tempsMax!==null||s.filters.velo.distMax!==null||s.filters.velo.denivMax!==null||s.filters.velo.apiedPossible),$=h(()=>s.filters.approche.tempsMax!==null),N=h(()=>s.filters.total.tempsTV!==null||s.filters.total.tempsTVA!==null);function I(c){return s.filters.exposition.includes(c)}function D(c){return s.filters.cotations.includes(c)}function f(c){const t=parseInt(c,10);return isNaN(t)?null:t}return(c,t)=>(n(),a("div",Ve,[e("div",Me,[e("div",Ae,[e("div",{tabindex:"0",role:"button",class:E(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":r.value}])}," Voies ðŸ§—â€â™€ï¸ ",2),e("div",Ee,[e("div",Ne,[e("div",Se,[t[15]||(t[15]=e("div",null,[e("span",{class:"font-bold"},"Cotations"),w(" (ex: 5+ ET 6+)")],-1)),e("div",Fe,[(n(),a(g,null,M(_,o=>e("div",{key:o[0].id,class:"flex flex-row gap-4"},[(n(!0),a(g,null,M(o,k=>(n(),a("label",{key:k.id,class:E(["label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1",{"w-16 justify-start":o.length>1}])},[e("input",{type:"checkbox",checked:D(k.id),class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:C=>i(s).toggleCotation(k.id)},null,40,Oe),e("span",je,d(k.label),1)],2))),128))])),64)),t[14]||(t[14]=e("span",{class:"italic text-base-300 text-sm"},"(5- = de 5a Ã  5b, 5+ = de 5b+ Ã  5c+)",-1))])])]),t[16]||(t[16]=e("div",{class:"font-bold"},"Nombre de voies",-1)),e("div",null,[e("label",Ie,[e("select",{class:"select border-base-300 select-sm focus:outline-base-300",value:i(s).filters.nbVoiesMin,onChange:t[0]||(t[0]=o=>i(s).setNbVoiesMin(Number(o.target.value)))},[(n(),a(g,null,M(x,o=>e("option",{key:o.value,value:o.value},d(o.label),9,ze)),64))],40,De)])]),t[17]||(t[17]=e("div",{class:"font-bold"},"Types de voies",-1)),e("div",Pe,[(n(),a(g,null,M(b,o=>e("div",{key:o.id,class:"flex flex-row gap-2 items-center w-full"},[e("label",Be,[e("input",{type:"checkbox",checked:i(s).filters.typeVoies[o.id],class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:k=>i(s).setTypeVoie(o.id,!i(s).filters.typeVoies[o.id])},null,40,He),e("span",Re,d(o.label),1)])])),64))])])]),e("div",qe,[e("div",{tabindex:"0",role:"button",class:E(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":u.value}])}," Exposition ðŸ”… ",2),e("div",Le,[e("div",Ge,[e("div",Ue,[(n(),a(g,null,M(l,o=>e("label",{key:o.id,class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},[e("input",{type:"checkbox",checked:I(o.id),class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))] checkbox-sm",onChange:k=>i(s).toggleExposition(o.id)},null,40,Ze),e("span",Ke,[w(d(o.label)+" ",1),e("span",Je,d(o.hint),1)])])),64))])])])]),e("div",Qe,[e("div",{tabindex:"0",role:"button",class:E(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":v.value}])}," Train ðŸšž ",2),e("div",We,[e("label",Xe,[t[18]||(t[18]=e("div",{class:"font-bold"},"DurÃ©e",-1)),t[19]||(t[19]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-bordered input-sm w-14",value:i(s).filters.train.tempsMax??"",onInput:t[1]||(t[1]=o=>i(s).setTrainTempsMax(f(o.target.value)))},null,40,Ye),t[20]||(t[20]=e("div",null,"minutes",-1))]),e("div",et,[t[23]||(t[23]=e("div",null,"Nb. Corresp. Max",-1)),e("div",tt,[e("label",st,[e("input",{type:"radio",name:"nbCorrespMax",value:"0",class:"radio radio-primary radio-xs",checked:i(s).filters.train.correspMax===0,onChange:t[2]||(t[2]=o=>i(s).setTrainCorrespMax(0))},null,40,lt),t[21]||(t[21]=e("span",{class:"label-text"},"0",-1))]),e("label",ot,[e("input",{type:"radio",name:"nbCorrespMax",value:"1",class:"radio radio-primary radio-xs",checked:i(s).filters.train.correspMax===1,onChange:t[3]||(t[3]=o=>i(s).setTrainCorrespMax(1))},null,40,nt),t[22]||(t[22]=e("span",{class:"label-text"},"â‰¤1",-1))]),i(s).filters.train.correspMax!==null?(n(),a("button",{key:0,type:"button",class:"btn btn-ghost btn-xs p-0",title:"RÃ©initialiser",onClick:t[4]||(t[4]=o=>i(s).setTrainCorrespMax(null))}," âœ• ")):y("",!0)])]),t[26]||(t[26]=e("div",{class:"divider my-1"},null,-1)),e("label",at,[e("div",it,[t[24]||(t[24]=e("span",{class:"label-text text-sm"},"TGV OK",-1)),e("input",{type:"checkbox",class:"toggle toggle-primary toggle-sm",checked:i(s).filters.train.terOnly,onChange:t[5]||(t[5]=o=>i(s).setTrainTerOnly(!i(s).filters.train.terOnly))},null,40,rt),t[25]||(t[25]=e("span",{class:"label-text text-sm"},"TER uniquement",-1))])])])])]),e("div",dt,[e("div",ct,[e("div",{tabindex:"0",role:"button",class:E(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":m.value}])}," VÃ©lo ðŸš² ",2),e("div",ut,[e("div",pt,[t[33]||(t[33]=e("div",null,"Trajet vÃ©lo",-1)),e("div",ft,[e("label",bt,[t[27]||(t[27]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-bordered input-sm w-14",value:i(s).filters.velo.tempsMax??"",onInput:t[6]||(t[6]=o=>i(s).setVeloTempsMax(f(o.target.value)))},null,40,vt),t[28]||(t[28]=e("div",null,"minutes",-1))]),e("label",mt,[t[29]||(t[29]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-bordered input-sm w-14",value:i(s).filters.velo.distMax??"",onInput:t[7]||(t[7]=o=>i(s).setVeloDistMax(f(o.target.value)))},null,40,xt),t[30]||(t[30]=e("div",null,"km",-1))]),e("label",_t,[t[31]||(t[31]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-bordered input-sm w-14",value:i(s).filters.velo.denivMax??"",onInput:t[8]||(t[8]=o=>i(s).setVeloDenivMax(f(o.target.value)))},null,40,gt),t[32]||(t[32]=e("div",null,"D+",-1))])])]),e("div",ht,[t[35]||(t[35]=e("div",{class:"bg-base-100 rounded-full w-6 h-6 border-2 border-base-300 flex items-center justify-center text-xs text-slate-600 font-bold"},"OU",-1)),e("label",yt,[e("input",{type:"checkbox",checked:i(s).filters.velo.apiedPossible,class:"checkbox border-base-300 bg-base-100 [--chkbg:oklch(var(--p))]",onChange:t[9]||(t[9]=o=>i(s).setVeloApiedPossible(!i(s).filters.velo.apiedPossible))},null,40,kt),t[34]||(t[34]=e("div",null,"Accessible Ã  pied",-1))])])])]),e("div",wt,[e("div",{tabindex:"0",role:"button",class:E(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":$.value}])}," Marche ðŸ¥¾ ",2),e("div",Tt,[e("label",$t,[t[36]||(t[36]=e("div",{class:"font-bold"},"Approche",-1)),t[37]||(t[37]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-bordered input-sm w-14",value:i(s).filters.approche.tempsMax??"",onInput:t[10]||(t[10]=o=>i(s).setApprocheTempsMax(f(o.target.value)))},null,40,Ct),t[38]||(t[38]=e("div",null,"minutes",-1))])])]),e("div",Vt,[e("div",{tabindex:"0",role:"button",class:E(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":N.value}])}," Total â±ï¸ ",2),e("div",Mt,[e("div",At,[e("label",Et,[t[39]||(t[39]=e("div",null,"Train+VÃ©lo",-1)),t[40]||(t[40]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-bordered input-sm w-14",value:i(s).filters.total.tempsTV??"",onInput:t[11]||(t[11]=o=>i(s).setTotalTempsTV(f(o.target.value)))},null,40,Nt),t[41]||(t[41]=e("div",null,"minutes",-1))]),e("label",St,[t[42]||(t[42]=e("div",null,"Train+VÃ©lo+Approche",-1)),t[43]||(t[43]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-bordered input-sm w-14",value:i(s).filters.total.tempsTVA??"",onInput:t[12]||(t[12]=o=>i(s).setTotalTempsTVA(f(o.target.value)))},null,40,Ft),t[44]||(t[44]=e("div",null,"minutes",-1))])])])]),i(s).hasActiveFilters?(n(),a("button",{key:0,type:"button",class:"btn btn-sm btn-ghost text-primary",onClick:t[13]||(t[13]=o=>i(s).resetFilters())},[...t[45]||(t[45]=[e("svg",{class:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 4C14.7486 4 17.1749 5.38626 18.6156 7.5H16V9.5H22V3.5H20V5.99936C18.1762 3.57166 15.2724 2 12 2C6.47715 2 2 6.47715 2 12H4C4 7.58172 7.58172 4 12 4ZM20 12C20 16.4183 16.4183 20 12 20C9.25144 20 6.82508 18.6137 5.38443 16.5H8V14.5H2V20.5H4V18.0006C5.82381 20.4283 8.72764 22 12 22C17.5228 22 22 17.5228 22 12H20Z"})],-1),w(" RÃ©initialiser ",-1)])])):y("",!0)])]))}});function A(p){if(p==null)return"";const s=Math.floor(p/60),l=p%60;return s>0?`${s}h${l.toString().padStart(2,"0")}`:`${l}'`}const jt={10:"0-20 voies",20:"~20 voies",35:"20-50 voies",50:"~50 voies",75:"50-100 voies",100:"~100 voies",150:"100-200 voies",200:"~200 voies",350:"200-500 voies",500:"~500 voies",1e3:"500+ voies"};function It(p){return jt[p]||"Voies"}const Dt=["href"],zt={class:"flex flex-col rounded-lg shadow-xl bg-base-100 p-2 text-sm"},Pt={class:"flex flex-row justify-between gap-1"},Bt={class:"text-xl font-bold text-primary hover:underline"},Ht={key:0,class:"text-error font-normal"},Rt={class:"font-bold text-xl"},qt={class:"w-full flex flex-row items-center justify-between gap-2"},Lt={class:"flex flex-col items-start justify-start flex-grow"},Gt={key:0,class:"text-accent"},Ut={key:1,class:"text-accent"},Zt={key:2,class:"text-accent"},Kt={key:0},Jt={key:1},Qt=["id"],Wt={class:"w-full"},Xt={class:"border-base-300"},Yt={class:"list-disc list-inside"},es={key:0,class:"badge badge-accent badge-sm",title:"Trajet empruntant un segment TGV"},ts={title:"D=Direct / C=Correspondances"},ss=F({__name:"FalaiseMobileCard",props:{falaise:{},villeId:{}},setup(p){const s=p,l=h(()=>s.falaise[0]),_=h(()=>`rose-mobile-${l.value.falaise_id}`);oe(()=>{typeof roseFromExpo=="function"&&roseFromExpo(_.value,l.value.falaise_exposhort1,l.value.falaise_exposhort2,72,72)});function b(x){const u=x.train_correspmin===0?"D":`${x.train_correspmin}C`,r=x.train_correspmax===0||x.train_correspmax===x.train_correspmin?"":`/${x.train_correspmax}C`;return u+r}return(x,u)=>(n(),a("a",{href:`/falaise.php?falaise_id=${l.value.falaise_id}&ville_id=${p.villeId}`,class:"text-base-content hover:no-underline font-normal"},[e("div",zt,[e("div",Pt,[e("h3",Bt,[w(d(l.value.falaise_nom)+" ",1),l.value.falaise_fermee?(n(),a("span",Ht,"Falaise Interdite")):y("",!0)]),e("div",Rt,d(i(A)(l.value.temps_total)),1)]),e("div",qt,[e("div",Lt,[e("div",null,[u[0]||(u[0]=e("b",null,"Zone",-1)),w(" : "+d(l.value.zone_nom),1)]),e("div",null,[u[1]||(u[1]=e("b",{title:"Cotations (6-: 6a Ã  6b, 6+: 6b+ Ã  6c+ etc.)"},"Cotations",-1)),u[2]||(u[2]=w(" : ",-1)),e("span",null,"de "+d(l.value.falaise_cotmin)+" Ã  "+d(l.value.falaise_cotmax),1)]),l.value.falaise_gvnb?(n(),a("div",Gt,d(l.value.falaise_gvnb),1)):y("",!0),l.value.falaise_bloc===1?(n(),a("div",Ut,"Secteur de bloc")):l.value.falaise_bloc===2?(n(),a("div",Zt,"Psychobloc")):y("",!0),e("div",null,[u[3]||(u[3]=e("b",{title:"Marche d'approche"},"Marche d'approche",-1)),u[4]||(u[4]=w(" : ",-1)),l.value.falaise_maa>0?(n(),a("span",Kt,d(i(A)(l.value.falaise_maa)),1)):(n(),a("span",Jt,"Aucune"))])]),e("div",{id:_.value,class:"w-[72px]"},null,8,Qt)]),e("div",Wt,[e("div",Xt,[e("b",null,"Acces depuis "+d(l.value.ville_nom)+" :",1)]),e("ul",Yt,[(n(!0),a(g,null,M(p.falaise,(r,v)=>(n(),a("li",{key:v},[r.train_temps>0?(n(),a(g,{key:0},[r.train_tgv?(n(),a("span",es,"TGV")):y("",!0),w(" Train pour "+d(r.train_arrivee)+" ("+d(i(A)(r.train_temps))+", ",1),e("span",ts,d(b(r)),1),u[5]||(u[5]=w(") + ",-1))],64)):y("",!0),w(" "+d(i(A)(i(S)(r)))+" "+d(r.velo_apieduniquement===1?"A pied":"a velo")+" ",1),r.variante_a_pied===1?(n(),a(g,{key:1},[u[6]||(u[6]=e("br",null,null,-1)),u[7]||(u[7]=e("span",{class:"text-primary"},"Aussi accessible a pied",-1))],64)):y("",!0)]))),128))])])])],8,Dt))}}),ls={class:"bg-base-100 px-2 py-1 self-stretch font-bold flex flex-col items-center justify-center text-base"},os=["href"],ns={key:0,class:"text-error text-sm font-normal"},as={key:1,class:"font-normal text-xs"},is={class:"text-base font-bold"},rs={key:0,class:"badge badge-accent badge-sm",title:"Trajet empruntant un segment TGV"},ds={title:"D=Direct / C=Correspondances"},cs={class:"text-nowrap"},us={class:"text-base font-bold"},ps={key:0,class:"text-primary"},fs={key:1,class:"text-primary"},bs={class:"bg-base-100 px-2 py-1 self-stretch flex flex-row items-center justify-end gap-2"},vs={class:"flex flex-col items-center justify-center gap-1 flex-grow"},ms={class:"font-bold"},xs={class:"font-bold"},_s={class:"font-bold",title:"Cotations (6-: 6a a 6b, 6+: 6b+ a 6c+ etc.)"},gs={key:0,class:"text-accent"},hs={key:1,class:"text-accent"},ys={key:2,class:"text-accent"},ks=["id"],ws=F({__name:"FalaiseDesktopRow",props:{falaise:{},villeId:{}},setup(p){const s=p,l=h(()=>s.falaise[0]),_=h(()=>`rose-${l.value.falaise_id}`);oe(()=>{typeof roseFromExpo=="function"&&roseFromExpo(_.value,l.value.falaise_exposhort1,l.value.falaise_exposhort2,72,72)});function b(r){const v=r.train_correspmin===0?"D":`${r.train_correspmin}C`,m=r.train_correspmax===0||r.train_correspmax===r.train_correspmin?"":`/${r.train_correspmax}C`;return v+m}function x(r){return A(S(r))}function u(r){const{velo_km:v,velo_dmoins:m,velo_apieduniquement:$}=r;let N;return $===1?N=v/4+m/500:N=v/20+m/500,A(Math.round(N*60))}return(r,v)=>(n(),a(g,null,[e("div",ls,[e("div",null,[e("a",{href:`/falaise.php?falaise_id=${l.value.falaise_id}&ville_id=${p.villeId}`},d(l.value.falaise_nom),9,os),l.value.falaise_fermee?(n(),a("div",ns,"Falaise Interdite")):y("",!0),l.value.zone_nom?(n(),a("div",as,"("+d(l.value.zone_nom)+")",1)):y("",!0)])]),e("div",{class:"font-bold bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:P({gridTemplateRows:`repeat(${p.falaise.length}, 1fr)`})},[(n(!0),a(g,null,M(p.falaise,(m,$)=>(n(),a("div",{key:$,class:"self-stretch flex flex-col justify-center py-2 px-2"},d(i(A)(i(S)(m)+m.train_temps+l.value.falaise_maa)),1))),128))],4),e("div",{class:"bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:P({gridTemplateRows:`repeat(${p.falaise.length}, 1fr)`})},[(n(!0),a(g,null,M(p.falaise,(m,$)=>(n(),a("div",{key:$,class:"self-stretch flex flex-col justify-center py-2 px-2"},[m.train_temps>0?(n(),a(g,{key:0},[e("div",is,[m.train_tgv?(n(),a("span",rs,"TGV")):y("",!0),w(" "+d(i(A)(m.train_temps))+" ",1),e("span",ds,"("+d(b(m))+")",1)]),e("div",cs,d(m.train_arrivee),1)],64)):(n(),a(g,{key:1},[w(" Pas de train a prendre ")],64))]))),128))],4),e("div",{class:"bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:P({gridTemplateRows:`repeat(${p.falaise.length}, 1fr)`})},[(n(!0),a(g,null,M(p.falaise,(m,$)=>(n(),a("div",{key:$,class:"self-stretch flex flex-col justify-center py-2 px-2"},[e("div",us," Aller : "+d(x(m))+" - Retour : "+d(u(m)),1),e("div",null,d(m.velo_km)+" km, "+d(m.velo_dplus)+" D+, "+d(m.velo_dmoins)+" D-",1),m.velo_apieduniquement===1?(n(),a("div",ps,"A pied uniquement")):y("",!0),m.variante_a_pied===1?(n(),a("div",fs,"Aussi accessible a pied")):y("",!0)]))),128))],4),e("div",bs,[e("div",vs,[e("div",null,[v[0]||(v[0]=e("span",{title:"Marche d'approche"},"Marche d'approche",-1)),v[1]||(v[1]=w(" : ",-1)),e("span",ms,[l.value.falaise_maa>0?(n(),a(g,{key:0},[w(d(i(A)(l.value.falaise_maa)),1)],64)):(n(),a(g,{key:1},[w("Aucune")],64))])]),e("div",null,[e("span",xs,d(i(It)(l.value.falaise_nbvoies)),1),v[2]||(v[2]=w(" de ",-1)),e("span",_s,d(l.value.falaise_cotmin)+" a "+d(l.value.falaise_cotmax),1)]),l.value.falaise_gvnb?(n(),a("div",gs,d(l.value.falaise_gvnb),1)):y("",!0),l.value.falaise_bloc===1?(n(),a("div",hs,"Secteur de bloc")):l.value.falaise_bloc===2?(n(),a("div",ys,"Psychobloc")):y("",!0)]),e("div",{id:_.value,class:"w-[72px]"},null,8,ks)])],64))}}),Ts={class:"dropdown dropdown-end w-fit"},$s={class:"dropdown-content menu bg-base-200 rounded-box z-[1] m-1 w-48 p-2 shadow-lg items-start",tabindex:"1"},Cs=["onClick"],Vs=F({__name:"SortDropdown",setup(p){const s=B(),l=[{key:"total",dir:"asc",label:"Temps total"},{key:"total",dir:"desc",label:"Temps total"},{key:"train",dir:"asc",label:"Temps Train"},{key:"train",dir:"desc",label:"Temps Train"},{key:"velo",dir:"asc",label:"Temps Velo"},{key:"velo",dir:"desc",label:"Temps Velo"},{key:"voies",dir:"asc",label:"Nb voies"},{key:"voies",dir:"desc",label:"Nb voies"},{key:"approche",dir:"asc",label:"Approche"},{key:"approche",dir:"desc",label:"Approche"}];function _(x){return s.sort.key===x.key&&s.sort.dir===x.dir}function b(x){s.setSort(x.key,x.dir)}return(x,u)=>(n(),a("div",Ts,[u[2]||(u[2]=e("div",{tabindex:"0",role:"button",class:"btn btn-sm text-nowrap focus:pointer-events-none"}," Tri ",-1)),e("div",$s,[u[0]||(u[0]=e("div",{class:"font-bold"},"Trier par",-1)),u[1]||(u[1]=e("hr",{class:"w-1/2 bg-base-300 mb-1 mt-2 mx-auto"},null,-1)),e("ul",null,[(n(),a(g,null,M(l,r=>e("li",{key:`${r.key}-${r.dir}`},[e("a",{class:E(["p-1 justify-start",{"font-bold text-primary":_(r),"font-normal text-base-content":!_(r)}]),onClick:v=>b(r)},d(r.label)+" "+d(r.dir==="asc"?"â†—":"â†˜"),11,Cs)])),64))])])]))}}),Ms={class:"flex flex-col gap-4"},As={class:"flex justify-between w-full items-center"},Es={id:"nbFalaisesInFilter",class:"text-primary text-sm font-bold"},Ns={class:"flex flex-col gap-4 md:hidden"},Ss={key:0,class:"bg-base-100 text-center w-full py-4 font-bold rounded-lg shadow-lg"},Fs={class:"hidden md:grid grid-cols-[1.5fr_60px_1fr_2fr_2fr] gap-[1px] bg-base-300 shadow-xl rounded-lg overflow-hidden text-center items-center text-sm"},Os={key:0,class:"bg-base-100 text-center w-full col-span-5 py-4 font-bold"},js=F({__name:"TableauList",setup(p){const s=B(),l=h(()=>s.sortedFalaises),_=h(()=>s.villeId??0),b=h(()=>s.filteredCount),x=h(()=>b.value>0);return(u,r)=>(n(),a("div",Ms,[e("div",As,[e("div",Es,d(b.value)+" falaises ",1),Te(Vs)]),e("div",Ns,[(n(!0),a(g,null,M(l.value,v=>(n(),te(ss,{key:v[0].falaise_id,falaise:v,"ville-id":_.value},null,8,["falaise","ville-id"]))),128)),x.value?y("",!0):(n(),a("div",Ss," Aucune falaise ne correspond aux filtres. "))]),e("div",Fs,[r[0]||(r[0]=$e('<div class="bg-base-100 px-2 py-1 self-stretch flex items-center justify-center vg-desktop-header"></div><div class="bg-base-100 px-1 py-1 self-stretch flex items-center justify-center font-bold text-xs vg-desktop-header"> Temps total (T+V+A) </div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Train" src="/images/icons/train-station_color.png"></div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Velo" src="/images/icons/bicycle_color.png"></div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Escalade" src="/images/icons/rock-climbing_color.png"></div>',5)),(n(!0),a(g,null,M(l.value,v=>(n(),te(ws,{key:v[0].falaise_id,falaise:v,"ville-id":_.value},null,8,["falaise","ville-id"]))),128)),x.value?y("",!0):(n(),a("div",Os," Aucune falaise ne correspond aux filtres. "))])]))}});document.addEventListener("DOMContentLoaded",()=>{const p=document.getElementById("vue-filters"),s=document.getElementById("vue-tableau");if(!p&&!s){console.warn("[velogrimpe] No mount points found for tableau");return}const l=Ce(),_=B(l);if(window.__TABLEAU_DATA__?(_.initialize(window.__TABLEAU_DATA__),console.log("[velogrimpe] Tableau store initialized with",window.__TABLEAU_DATA__.falaises.length,"falaises")):console.warn("[velogrimpe] No tableau data found on window.__TABLEAU_DATA__"),p){const b=se(Ot);b.use(l),b.mount(p),console.log("[velogrimpe] Vue tableau filters mounted")}if(s){const b=se(js);b.use(l),b.mount(s),console.log("[velogrimpe] Vue tableau list mounted")}});
