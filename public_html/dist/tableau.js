import{r as O,f as y,d as S,c as a,o as n,a as e,F as x,b as V,n as N,t as r,e as w,u as i,m as h,i as j,p as B,q as te,s as Te,k as le}from"./chunks/runtime-dom.esm-bundler-DMen96Nq.js";import{d as $e,c as Ve}from"./chunks/pinia-CZ5zk4qe.js";import{u as oe}from"./chunks/filters-CmDp-o8g.js";import{c as E,f as M}from"./chunks/time-BTxH6nDj.js";import{_ as Ce}from"./chunks/Icon.vue_vue_type_script_setup_true_lang-C9j0lfjA.js";import{R as ne}from"./chunks/RoseDesVents-C40cJSyr.js";import"./chunks/_plugin-vue_export-helper-DlAUqK2U.js";const R=$e("tableau",()=>{const v=oe(),t=O([]),o=O(null),_=O(!1),m=O({key:"total",dir:"asc"});function d(f){t.value=f.falaises,o.value=f.villeId,_.value=!0}function c(f,p){m.value={key:f,dir:p}}function b(f){m.value.key===f?m.value.dir=m.value.dir==="asc"?"desc":"asc":m.value={key:f,dir:"asc"}}function u(f){const p=Math.min(...f.map(k=>k.temps_total||0)),s=Math.min(...f.map(k=>k.train_temps||0)),l=Math.min(...f.map(k=>E(k))),g=f[0].falaise_nbvoies||0,T=f[0].falaise_maa||0;return{minTotal:p,minTrain:s,minVelo:l,nbVoies:g,approche:T}}function C(f){const p=v.filters,s=f[0],l=p.exposition.includes("N"),g=p.exposition.includes("E"),T=p.exposition.includes("S"),k=p.exposition.includes("O"),F=p.exposition.length>0,ae=p.cotations.length>0,ie=p.cotations.includes("40"),re=p.cotations.includes("50"),de=p.cotations.includes("59"),ce=p.cotations.includes("60"),ue=p.cotations.includes("69"),pe=p.cotations.includes("70"),me=p.cotations.includes("79"),fe=p.cotations.includes("80"),{couenne:L,grandeVoie:q,bloc:G,psychobloc:U}=p.typeVoies,be=L||q||G||U,{tempsMax:H,distMax:K,denivMax:Z,apiedPossible:ve}=p.velo,{tempsMax:J,correspMax:Q,terOnly:xe}=p.train,W=Q!==null?Q:10,{tempsMax:X}=p.approche,{tempsTV:Y,tempsTVA:ee}=p.total,se=p.nbVoiesMin,_e=(!ie||"4+".localeCompare(s.falaise_cotmin)>=0)&&(!re||"5-".localeCompare(s.falaise_cotmin)>=0&&s.falaise_cotmax.localeCompare("5-")>=0)&&(!de||"5+".localeCompare(s.falaise_cotmin)>=0&&s.falaise_cotmax.localeCompare("5+")>=0)&&(!ce||"6-".localeCompare(s.falaise_cotmin)>=0&&s.falaise_cotmax.localeCompare("6-")>=0)&&(!ue||"6+".localeCompare(s.falaise_cotmin)>=0&&s.falaise_cotmax.localeCompare("6+")>=0)&&(!pe||"7-".localeCompare(s.falaise_cotmin)>=0&&s.falaise_cotmax.localeCompare("7-")>=0)&&(!me||"7+".localeCompare(s.falaise_cotmin)>=0&&s.falaise_cotmax.localeCompare("7+")>=0)&&(!fe||s.falaise_cotmax.localeCompare("8-")>=0),ge=s.falaise_nbvoies>=se||se===0,he=L&&!s.falaise_bloc||q&&!!s.falaise_gvnb||G&&s.falaise_bloc===1||U&&s.falaise_bloc===2,ye=f.some($=>{const P=E($);return(!xe||($.train_tgv||0)===0)&&(J===null||$.train_temps<=J)&&(W===10||$.train_correspmax<=W)&&(Y===null||$.train_temps+P<=Y)&&(ee===null||$.temps_total<=ee)}),ke=!F||!!(l&&(s.falaise_exposhort1.includes("'N")||s.falaise_exposhort2.includes("'N"))||g&&(s.falaise_exposhort1.match(/('E|'NE'|'SE')/)||s.falaise_exposhort2.match(/('E|'NE'|'SE')/))||T&&(s.falaise_exposhort1.includes("'S")||s.falaise_exposhort2.includes("'S"))||k&&(s.falaise_exposhort1.match(/('O|'NO'|'SO')/)||s.falaise_exposhort2.match(/('O|'NO'|'SO')/))),we=f.some($=>{const P=E($);return(H===null||P<=H)&&(Z===null||$.velo_dplus<=Z)&&(K===null||$.velo_km<=K)&&(!ve||$.velo_apieduniquement===1||$.velo_apiedpossible===1)});return ke&&(!ae||_e)&&ge&&(X===null||(s.falaise_maa||0)<=X)&&(!be||he)&&ye&&we}const A=y(()=>t.value.filter(f=>C(f))),D=y(()=>{const f=[...A.value];return f.sort((p,s)=>{const l=u(p),g=u(s);let T=0,k=0;switch(m.value.key){case"total":T=l.minTotal,k=g.minTotal;break;case"train":T=l.minTrain,k=g.minTrain;break;case"velo":T=l.minVelo,k=g.minVelo;break;case"voies":T=l.nbVoies,k=g.nbVoies;break;case"approche":T=l.approche,k=g.approche;break}const F=T===k?0:T<k?-1:1;return m.value.dir==="asc"?F:-F}),f}),I=y(()=>t.value.length),z=y(()=>A.value.length);return{falaises:t,villeId:o,isInitialized:_,sort:m,sortedFalaises:D,totalCount:I,filteredCount:z,initialize:d,setSort:c,toggleSort:b,calculateVeloTime:E}}),Me={class:"dropdown dropdown-end w-fit"},Ae={class:"dropdown-content menu bg-base-200 rounded-box z-1 m-1 w-48 p-2 shadow-lg items-start",tabindex:"1"},Ne=["onClick"],Ee=S({__name:"SortDropdown",setup(v){const t=R(),o=[{key:"total",dir:"asc",label:"Temps total"},{key:"total",dir:"desc",label:"Temps total"},{key:"train",dir:"asc",label:"Temps Train"},{key:"train",dir:"desc",label:"Temps Train"},{key:"velo",dir:"asc",label:"Temps Velo"},{key:"velo",dir:"desc",label:"Temps Velo"},{key:"voies",dir:"asc",label:"Nb voies"},{key:"voies",dir:"desc",label:"Nb voies"},{key:"approche",dir:"asc",label:"Approche"},{key:"approche",dir:"desc",label:"Approche"}];function _(d){return t.sort.key===d.key&&t.sort.dir===d.dir}function m(d){t.setSort(d.key,d.dir)}return(d,c)=>(n(),a("div",Me,[c[2]||(c[2]=e("div",{tabindex:"0",role:"button",class:"btn btn-sm text-nowrap focus:pointer-events-none"}," Tri ",-1)),e("div",Ae,[c[0]||(c[0]=e("div",{class:"font-bold"},"Trier par",-1)),c[1]||(c[1]=e("hr",{class:"w-1/2 bg-base-300 mb-1 mt-2 mx-auto"},null,-1)),e("ul",null,[(n(),a(x,null,V(o,b=>e("li",{key:`${b.key}-${b.dir}`},[e("a",{class:N(["p-1 justify-start",{"font-bold text-primary":_(b),"font-normal text-base-content":!_(b)}]),onClick:u=>m(b)},r(b.label)+" "+r(b.dir==="asc"?"â†—":"â†˜"),11,Ne)])),64))])])]))}}),Se={class:"flex flex-col md:flex-row gap-1 items-center w-full max-w-full justify-center flex-wrap"},Fe={class:"flex gap-1 items-center"},Oe={class:"dropdown w-fit"},je={class:"dropdown-content menu gap-1 bg-base-200 rounded-box z-1 m-1 w-64 p-2 shadow-lg",tabindex:"1"},De={class:"flex flex-col gap-2"},Ie={class:"flex flex-col gap-3"},ze={class:"flex flex-col gap-1"},Pe=["checked","onChange"],Be={class:"label-text"},Re={class:"label cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},Le=["value"],qe=["value"],Ge={class:"grid grid-cols-[auto_auto] gap-x-2 gap-y-1 w-full"},Ue={class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},He=["checked","onChange"],Ke={class:"label-text"},Ze={class:"dropdown w-fit"},Je={class:"dropdown-content menu bg-base-200 rounded-box z-1 m-1 w-40 p-2 shadow-lg",tabindex:"1"},Qe={class:"flex flex-row gap-1 items-center"},We={class:"max-w-96 flex flex-col gap-1 w-full"},Xe=["checked","onChange"],Ye={class:"label-text"},es={class:"text-xs text-slate-400"},ss={class:"dropdown w-fit dropdown-end"},ts={class:"dropdown-content menu bg-base-200 rounded-box z-1 m-1 w-64 p-2 shadow-lg",tabindex:"1"},ls={class:"flex flex-row gap-2 items-center"},os=["value"],ns={class:"flex flex-row items-center gap-1 mt-2"},as={class:"flex flex-row gap-2 items-center"},is={class:"label cursor-pointer gap-1"},rs=["checked"],ds={class:"label cursor-pointer gap-1"},cs=["checked"],us={class:"form-control cursor-pointer"},ps={class:"label gap-2 p-0 justify-start"},ms=["checked"],fs={class:"flex gap-1 items-center"},bs={class:"dropdown w-fit"},vs={class:"dropdown-content menu bg-base-200 rounded-box z-1 m-1 w-64 p-2 shadow-lg",tabindex:"1"},xs={class:"flex flex-row gap-3 items-center"},_s={class:"flex flex-col gap-1"},gs={class:"flex flex-row gap-2 flex-wrap items-center"},hs=["value"],ys={class:"flex flex-row gap-2 items-center"},ks=["value"],ws={class:"flex flex-row gap-2 items-center"},Ts=["value"],$s={class:"flex flex-row gap-2 items-center mt-2"},Vs={class:"flex flex-row gap-2 items-center hover:bg-base-300 rounded-lg cursor-pointer p-0 pr-1"},Cs=["checked"],Ms={class:"dropdown w-fit"},As={class:"dropdown-content menu bg-base-200 rounded-box z-1 m-1 w-56 p-2 shadow-lg",tabindex:"1"},Ns={class:"flex flex-row gap-2 items-center"},Es=["value"],Ss={class:"dropdown w-fit dropdown-end"},Fs={class:"dropdown-content menu bg-base-200 rounded-box z-1 m-1 p-2 shadow-lg",tabindex:"1"},Os={class:"flex flex-col gap-2 items-end"},js={class:"flex flex-row gap-1 items-center"},Ds=["value"],Is={class:"flex flex-row gap-1 items-center"},zs=["value"],Ps=["disabled"],Bs=S({__name:"TableauFilterPanel",setup(v){const t=oe(),o=[{id:"N",label:"Nord",hint:"(NO, N, NE)"},{id:"E",label:"Est",hint:"(NE, E, SE)"},{id:"S",label:"Sud",hint:"(SE, S, SO)"},{id:"O",label:"Ouest",hint:"(SO, O, NO)"}],_=[[{id:"40",label:"4 et -"}],[{id:"50",label:"5-"},{id:"59",label:"5+"}],[{id:"60",label:"6-"},{id:"69",label:"6+"}],[{id:"70",label:"7-"},{id:"79",label:"7+"}],[{id:"80",label:"8 et +"}]],m=[{id:"couenne",label:"Couenne"},{id:"grandeVoie",label:"Grandes voies"},{id:"bloc",label:"Bloc"},{id:"psychobloc",label:"Psychobloc"}],d=[{value:0,label:"Pas de minimum"},{value:20,label:"Plus de 20"},{value:50,label:"Plus de 50"},{value:100,label:"Plus de 100"},{value:200,label:"Plus de 200"}],c=y(()=>t.filters.exposition.length>0),b=y(()=>t.filters.cotations.length>0||t.filters.typeVoies.couenne||t.filters.typeVoies.grandeVoie||t.filters.typeVoies.bloc||t.filters.typeVoies.psychobloc||t.filters.nbVoiesMin>0),u=y(()=>t.filters.train.tempsMax!==null||t.filters.train.correspMax!==null||t.filters.train.terOnly),C=y(()=>t.filters.velo.tempsMax!==null||t.filters.velo.distMax!==null||t.filters.velo.denivMax!==null||t.filters.velo.apiedPossible),A=y(()=>t.filters.approche.tempsMax!==null),D=y(()=>t.filters.total.tempsTV!==null||t.filters.total.tempsTVA!==null);function I(p){return t.filters.exposition.includes(p)}function z(p){return t.filters.cotations.includes(p)}function f(p){const s=parseInt(p,10);return isNaN(s)?null:s}return(p,s)=>(n(),a("div",Se,[e("div",Fe,[e("div",Oe,[e("div",{tabindex:"0",role:"button",class:N(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":b.value}])}," Voies ðŸ§—â€â™€ï¸ ",2),e("div",je,[e("div",De,[e("div",Ie,[s[15]||(s[15]=e("div",null,[e("span",{class:"font-bold"},"Cotations"),w(" (ex: 5+ ET 6+)")],-1)),e("div",ze,[(n(),a(x,null,V(_,l=>e("div",{key:l[0].id,class:"flex flex-row gap-4"},[(n(!0),a(x,null,V(l,g=>(n(),a("label",{key:g.id,class:N(["label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1",{"w-16 justify-start":l.length>1}])},[e("input",{type:"checkbox",checked:z(g.id),class:"checkbox checkbox-primary checkbox-sm",onChange:T=>i(t).toggleCotation(g.id)},null,40,Pe),e("span",Be,r(g.label),1)],2))),128))])),64)),s[14]||(s[14]=e("span",{class:"italic text-base-300 text-sm"},"(5- = de 5a Ã  5b, 5+ = de 5b+ Ã  5c+)",-1))])])]),s[16]||(s[16]=e("div",{class:"font-bold"},"Nombre de voies",-1)),e("div",null,[e("label",Re,[e("select",{class:"select border-base-300 select-sm focus:outline-base-300",value:i(t).filters.nbVoiesMin,onChange:s[0]||(s[0]=l=>i(t).setNbVoiesMin(Number(l.target.value)))},[(n(),a(x,null,V(d,l=>e("option",{key:l.value,value:l.value},r(l.label),9,qe)),64))],40,Le)])]),s[17]||(s[17]=e("div",{class:"font-bold"},"Types de voies",-1)),e("div",Ge,[(n(),a(x,null,V(m,l=>e("div",{key:l.id,class:"flex flex-row gap-2 items-center w-full"},[e("label",Ue,[e("input",{type:"checkbox",checked:i(t).filters.typeVoies[l.id],class:"checkbox checkbox-primary checkbox-sm",onChange:g=>i(t).setTypeVoie(l.id,!i(t).filters.typeVoies[l.id])},null,40,He),e("span",Ke,r(l.label),1)])])),64))])])]),e("div",Ze,[e("div",{tabindex:"0",role:"button",class:N(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":c.value}])}," Exposition ðŸ”… ",2),e("div",Je,[e("div",Qe,[e("div",We,[(n(),a(x,null,V(o,l=>e("label",{key:l.id,class:"label hover:bg-base-300 rounded-lg cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},[e("input",{type:"checkbox",checked:I(l.id),class:"checkbox checkbox-primary checkbox-sm",onChange:g=>i(t).toggleExposition(l.id)},null,40,Xe),e("span",Ye,[w(r(l.label)+" ",1),e("span",es,r(l.hint),1)])])),64))])])])]),e("div",ss,[e("div",{tabindex:"0",role:"button",class:N(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":u.value}])}," Train ðŸšž ",2),e("div",ts,[e("label",ls,[s[18]||(s[18]=e("div",{class:"font-bold"},"DurÃ©e",-1)),s[19]||(s[19]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-sm w-14",value:i(t).filters.train.tempsMax??"",onInput:s[1]||(s[1]=l=>i(t).setTrainTempsMax(f(l.target.value)))},null,40,os),s[20]||(s[20]=e("div",null,"minutes",-1))]),e("div",ns,[s[23]||(s[23]=e("div",null,"Nb. Corresp. Max",-1)),e("div",as,[e("label",is,[e("input",{type:"radio",name:"nbCorrespMax",value:"0",class:"radio radio-primary radio-xs",checked:i(t).filters.train.correspMax===0,onChange:s[2]||(s[2]=l=>i(t).setTrainCorrespMax(0))},null,40,rs),s[21]||(s[21]=e("span",{class:"label-text"},"0",-1))]),e("label",ds,[e("input",{type:"radio",name:"nbCorrespMax",value:"1",class:"radio radio-primary radio-xs",checked:i(t).filters.train.correspMax===1,onChange:s[3]||(s[3]=l=>i(t).setTrainCorrespMax(1))},null,40,cs),s[22]||(s[22]=e("span",{class:"label-text"},"â‰¤1",-1))]),i(t).filters.train.correspMax!==null?(n(),a("button",{key:0,type:"button",class:"btn btn-ghost btn-xs p-0",title:"RÃ©initialiser",onClick:s[4]||(s[4]=l=>i(t).setTrainCorrespMax(null))}," âœ• ")):h("",!0)])]),s[26]||(s[26]=e("div",{class:"divider my-1"},null,-1)),e("label",us,[e("div",ps,[s[24]||(s[24]=e("span",{class:"label-text text-sm"},"TGV OK",-1)),e("input",{type:"checkbox",class:"toggle toggle-primary toggle-sm",checked:i(t).filters.train.terOnly,onChange:s[5]||(s[5]=l=>i(t).setTrainTerOnly(!i(t).filters.train.terOnly))},null,40,ms),s[25]||(s[25]=e("span",{class:"label-text text-sm"},"TER uniquement",-1))])])])])]),e("div",fs,[e("div",bs,[e("div",{tabindex:"0",role:"button",class:N(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":C.value}])}," VÃ©lo ðŸš² ",2),e("div",vs,[e("div",xs,[s[33]||(s[33]=e("div",null,"Trajet vÃ©lo",-1)),e("div",_s,[e("label",gs,[s[27]||(s[27]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-sm w-14",value:i(t).filters.velo.tempsMax??"",onInput:s[6]||(s[6]=l=>i(t).setVeloTempsMax(f(l.target.value)))},null,40,hs),s[28]||(s[28]=e("div",null,"minutes",-1))]),e("label",ys,[s[29]||(s[29]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-sm w-14",value:i(t).filters.velo.distMax??"",onInput:s[7]||(s[7]=l=>i(t).setVeloDistMax(f(l.target.value)))},null,40,ks),s[30]||(s[30]=e("div",null,"km",-1))]),e("label",ws,[s[31]||(s[31]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-sm w-14",value:i(t).filters.velo.denivMax??"",onInput:s[8]||(s[8]=l=>i(t).setVeloDenivMax(f(l.target.value)))},null,40,Ts),s[32]||(s[32]=e("div",null,"D+",-1))])])]),e("div",$s,[s[35]||(s[35]=e("div",{class:"bg-base-100 rounded-full w-6 h-6 border-2 border-base-300 flex items-center justify-center text-xs text-slate-600 font-bold"}," OU ",-1)),e("label",Vs,[e("input",{type:"checkbox",checked:i(t).filters.velo.apiedPossible,class:"checkbox border-base-300 bg-base-100",onChange:s[9]||(s[9]=l=>i(t).setVeloApiedPossible(!i(t).filters.velo.apiedPossible))},null,40,Cs),s[34]||(s[34]=e("div",null,"Accessible Ã  pied",-1))])])])]),e("div",Ms,[e("div",{tabindex:"0",role:"button",class:N(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":A.value}])}," Marche ðŸ¥¾ ",2),e("div",As,[e("label",Ns,[s[36]||(s[36]=e("div",{class:"font-bold"},"Approche",-1)),s[37]||(s[37]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-sm w-14",value:i(t).filters.approche.tempsMax??"",onInput:s[10]||(s[10]=l=>i(t).setApprocheTempsMax(f(l.target.value)))},null,40,Es),s[38]||(s[38]=e("div",null,"minutes",-1))])])]),e("div",Ss,[e("div",{tabindex:"0",role:"button",class:N(["btn btn-sm text-nowrap focus:pointer-events-none",{"btn-primary":D.value}])}," Total â±ï¸ ",2),e("div",Fs,[e("div",Os,[e("label",js,[s[39]||(s[39]=e("div",null,"Train+VÃ©lo",-1)),s[40]||(s[40]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-sm w-14",value:i(t).filters.total.tempsTV??"",onInput:s[11]||(s[11]=l=>i(t).setTotalTempsTV(f(l.target.value)))},null,40,Ds),s[41]||(s[41]=e("div",null,"minutes",-1))]),e("label",Is,[s[42]||(s[42]=e("div",null,"Train+VÃ©lo+Approche",-1)),s[43]||(s[43]=e("div",{class:"text-normal font-bold"},"â‰¤",-1)),e("input",{type:"number",step:"1",min:"0",class:"input input-sm w-14",value:i(t).filters.total.tempsTVA??"",onInput:s[12]||(s[12]=l=>i(t).setTotalTempsTVA(f(l.target.value)))},null,40,zs),s[44]||(s[44]=e("div",null,"minutes",-1))])])])]),e("button",{type:"button",class:"btn btn-sm btn-ghost",disabled:!i(t).hasActiveFilters,onClick:s[13]||(s[13]=l=>i(t).resetFilters())},[j(Ce,{name:"refresh",class:"w-3 h-3"})],8,Ps),j(Ee)])]))}}),Rs=["href"],Ls={class:"flex flex-col rounded-lg shadow-xl bg-base-100 p-2 text-sm"},qs={class:"flex flex-row justify-between gap-1"},Gs={class:"text-xl font-bold text-primary hover:underline"},Us={key:0,class:"text-error font-normal"},Hs={class:"font-bold text-xl"},Ks={class:"w-full flex flex-row items-center justify-between gap-2"},Zs={class:"flex flex-col items-start justify-start grow"},Js={key:0,class:"text-accent"},Qs={key:1,class:"text-accent"},Ws={key:2,class:"text-accent"},Xs={key:0},Ys={key:1},et={class:"w-full"},st={class:"border-base-300"},tt={class:"list-disc list-inside"},lt={key:0,class:"badge badge-accent badge-sm",title:"Trajet empruntant un segment TGV"},ot={title:"D=Direct / C=Correspondances"},nt=S({__name:"FalaiseMobileCard",props:{falaise:{},villeId:{}},setup(v){const t=v,o=y(()=>t.falaise[0]);function _(m){const d=m.train_correspmin===0?"D":`${m.train_correspmin}C`,c=m.train_correspmax===0||m.train_correspmax===m.train_correspmin?"":`/${m.train_correspmax}C`;return d+c}return(m,d)=>(n(),a("a",{href:`/falaise.php?falaise_id=${o.value.falaise_id}&ville_id=${v.villeId}`,class:"card-link text-base-content hover:no-underline font-normal"},[e("div",Ls,[e("div",qs,[e("h3",Gs,[w(r(o.value.falaise_nom)+" ",1),o.value.falaise_fermee?(n(),a("span",Us,"Falaise Interdite")):h("",!0)]),e("div",Hs,r(i(M)(o.value.temps_total)),1)]),e("div",Ks,[e("div",Zs,[e("div",null,[d[0]||(d[0]=e("b",null,"Zone",-1)),w(" : "+r(o.value.zone_nom),1)]),e("div",null,[d[1]||(d[1]=e("b",{title:"Cotations (6-: 6a Ã  6b, 6+: 6b+ Ã  6c+ etc.)"},"Cotations",-1)),d[2]||(d[2]=w(" : ",-1)),e("span",null,"de "+r(o.value.falaise_cotmin)+" Ã  "+r(o.value.falaise_cotmax),1)]),o.value.falaise_gvnb?(n(),a("div",Js,r(o.value.falaise_gvnb),1)):h("",!0),o.value.falaise_bloc===1?(n(),a("div",Qs," Secteur de bloc ")):o.value.falaise_bloc===2?(n(),a("div",Ws," Psychobloc ")):h("",!0),e("div",null,[d[3]||(d[3]=e("b",{title:"Marche d'approche"},"Marche d'approche",-1)),d[4]||(d[4]=w(" : ",-1)),o.value.falaise_maa>0?(n(),a("span",Xs,r(i(M)(o.value.falaise_maa)),1)):(n(),a("span",Ys,"Aucune"))])]),j(ne,{expo1:o.value.falaise_exposhort1,expo2:o.value.falaise_exposhort2,size:72},null,8,["expo1","expo2"])]),e("div",et,[e("div",st,[e("b",null,"Acces depuis "+r(o.value.ville_nom)+" :",1)]),e("ul",tt,[(n(!0),a(x,null,V(v.falaise,(c,b)=>(n(),a("li",{key:b},[c.train_temps>0?(n(),a(x,{key:0},[c.train_tgv?(n(),a("span",lt,"TGV")):h("",!0),w(" Train pour "+r(c.train_arrivee)+" ("+r(i(M)(c.train_temps))+", ",1),e("span",ot,r(_(c)),1),d[5]||(d[5]=w(") + ",-1))],64)):h("",!0),w(" "+r(i(M)(i(E)(c)))+" "+r(c.velo_apieduniquement===1?"A pied":"a velo")+" ",1),c.variante_a_pied===1?(n(),a(x,{key:1},[d[6]||(d[6]=e("br",null,null,-1)),d[7]||(d[7]=e("span",{class:"text-primary"},"Aussi accessible a pied",-1))],64)):h("",!0)]))),128))])])])],8,Rs))}}),at={10:"0-20 voies",20:"~20 voies",35:"20-50 voies",50:"~50 voies",75:"50-100 voies",100:"~100 voies",150:"100-200 voies",200:"~200 voies",350:"200-500 voies",500:"~500 voies",1e3:"500+ voies"};function it(v){return at[v]||"Voies"}const rt={class:"contents"},dt={class:"bg-base-100 px-2 py-1 self-stretch font-bold flex flex-col items-center justify-center text-base"},ct=["href"],ut={key:0,class:"text-error text-sm font-normal"},pt={key:1,class:"font-normal text-xs"},mt={class:"text-base font-bold"},ft={key:0,class:"badge badge-accent badge-sm",title:"Trajet empruntant un segment TGV"},bt={title:"D=Direct / C=Correspondances"},vt={class:"text-nowrap"},xt={class:"text-base font-bold"},_t={key:0,class:"text-primary"},gt={key:1,class:"text-primary"},ht={class:"bg-base-100 px-2 py-1 self-stretch flex flex-row items-center justify-end gap-2"},yt={class:"flex flex-col items-center justify-center gap-1 grow"},kt={class:"font-bold"},wt={class:"font-bold"},Tt={class:"font-bold",title:"Cotations (6-: 6a a 6b, 6+: 6b+ a 6c+ etc.)"},$t={key:0,class:"text-accent"},Vt={key:1,class:"text-accent"},Ct={key:2,class:"text-accent"},Mt=S({__name:"FalaiseDesktopRow",props:{falaise:{},villeId:{}},setup(v){const t=v,o=y(()=>t.falaise[0]);function _(c){const b=c.train_correspmin===0?"D":`${c.train_correspmin}C`,u=c.train_correspmax===0||c.train_correspmax===c.train_correspmin?"":`/${c.train_correspmax}C`;return b+u}function m(c){return M(E(c))}function d(c){const{velo_km:b,velo_dmoins:u,velo_apieduniquement:C}=c;let A;return C===1?A=b/4+u/500:A=b/20+u/500,M(Math.round(A*60))}return(c,b)=>(n(),a("div",rt,[e("div",dt,[e("div",null,[e("a",{href:`/falaise.php?falaise_id=${o.value.falaise_id}&ville_id=${v.villeId}`},r(o.value.falaise_nom),9,ct),o.value.falaise_fermee?(n(),a("div",ut,"Falaise Interdite")):h("",!0),o.value.zone_nom?(n(),a("div",pt,"("+r(o.value.zone_nom)+")",1)):h("",!0)])]),e("div",{class:"font-bold bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:B({gridTemplateRows:`repeat(${v.falaise.length}, 1fr)`})},[(n(!0),a(x,null,V(v.falaise,(u,C)=>(n(),a("div",{key:C,class:"self-stretch flex flex-col justify-center py-2 px-2"},r(i(M)(i(E)(u)+u.train_temps+o.value.falaise_maa)),1))),128))],4),e("div",{class:"bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:B({gridTemplateRows:`repeat(${v.falaise.length}, 1fr)`})},[(n(!0),a(x,null,V(v.falaise,(u,C)=>(n(),a("div",{key:C,class:"self-stretch flex flex-col justify-center py-2 px-2"},[u.train_temps>0?(n(),a(x,{key:0},[e("div",mt,[u.train_tgv?(n(),a("span",ft,"TGV")):h("",!0),w(" "+r(i(M)(u.train_temps))+" ",1),e("span",bt,"("+r(_(u))+")",1)]),e("div",vt,r(u.train_arrivee),1)],64)):(n(),a(x,{key:1},[w(" Pas de train a prendre ")],64))]))),128))],4),e("div",{class:"bg-base-100 py-1 self-stretch grid divide-y divide-slate-200 items-center",style:B({gridTemplateRows:`repeat(${v.falaise.length}, 1fr)`})},[(n(!0),a(x,null,V(v.falaise,(u,C)=>(n(),a("div",{key:C,class:"self-stretch flex flex-col justify-center py-2 px-2"},[e("div",xt," Aller : "+r(m(u))+" - Retour : "+r(d(u)),1),e("div",null,r(u.velo_km)+" km, "+r(u.velo_dplus)+" D+, "+r(u.velo_dmoins)+" D-",1),u.velo_apieduniquement===1?(n(),a("div",_t,"A pied uniquement")):h("",!0),u.variante_a_pied===1?(n(),a("div",gt,"Aussi accessible a pied")):h("",!0)]))),128))],4),e("div",ht,[e("div",yt,[e("div",null,[b[0]||(b[0]=e("span",{title:"Marche d'approche"},"Marche d'approche",-1)),b[1]||(b[1]=w(" : ",-1)),e("span",kt,[o.value.falaise_maa>0?(n(),a(x,{key:0},[w(r(i(M)(o.value.falaise_maa)),1)],64)):(n(),a(x,{key:1},[w("Aucune")],64))])]),e("div",null,[e("span",wt,r(i(it)(o.value.falaise_nbvoies)),1),b[2]||(b[2]=w(" de ",-1)),e("span",Tt,r(o.value.falaise_cotmin)+" a "+r(o.value.falaise_cotmax),1)]),o.value.falaise_gvnb?(n(),a("div",$t,r(o.value.falaise_gvnb),1)):h("",!0),o.value.falaise_bloc===1?(n(),a("div",Vt,"Secteur de bloc")):o.value.falaise_bloc===2?(n(),a("div",Ct,"Psychobloc")):h("",!0)]),j(ne,{expo1:o.value.falaise_exposhort1,expo2:o.value.falaise_exposhort2,size:72},null,8,["expo1","expo2"])])]))}}),At={class:"flex flex-col gap-4"},Nt={id:"nbFalaisesInFilter",class:"text-primary text-sm font-bold"},Et={class:"flex flex-col gap-4 md:hidden"},St={key:0,class:"bg-base-100 text-center w-full py-4 font-bold rounded-lg shadow-lg"},Ft={class:"hidden md:grid grid-cols-[1.5fr_60px_1fr_2fr_2fr] gap-px bg-base-300 shadow-xl rounded-lg overflow-hidden text-center items-center text-sm"},Ot={key:0,class:"bg-base-100 text-center w-full col-span-5 py-4 font-bold"},jt=S({__name:"TableauList",setup(v){const t=R(),o=y(()=>t.sortedFalaises),_=y(()=>t.villeId??0),m=y(()=>t.filteredCount),d=y(()=>m.value>0);return(c,b)=>(n(),a("div",At,[e("div",Nt,r(m.value)+" falaises ",1),e("div",Et,[(n(!0),a(x,null,V(o.value,u=>(n(),te(nt,{key:u[0].falaise_id,falaise:u,"ville-id":_.value},null,8,["falaise","ville-id"]))),128)),d.value?h("",!0):(n(),a("div",St," Aucune falaise ne correspond aux filtres. "))]),e("div",Ft,[b[0]||(b[0]=Te('<div class="bg-base-100 px-2 py-1 self-stretch flex items-center justify-center vg-desktop-header"></div><div class="bg-base-100 px-1 py-1 self-stretch flex items-center justify-center font-bold text-xs vg-desktop-header"> Temps total (T+V+A) </div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Train" src="/images/icons/train-station_color.png"></div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Velo" src="/images/icons/bicycle_color.png"></div><div class="bg-base-100 px-2 py-1 self-stretch flex flex-col items-center justify-center vg-desktop-header"><img class="h-12" alt="Escalade" src="/images/icons/rock-climbing_color.png"></div>',5)),(n(!0),a(x,null,V(o.value,u=>(n(),te(Mt,{key:u[0].falaise_id,falaise:u,"ville-id":_.value},null,8,["falaise","ville-id"]))),128)),d.value?h("",!0):(n(),a("div",Ot," Aucune falaise ne correspond aux filtres. "))])]))}});document.addEventListener("DOMContentLoaded",()=>{const v=document.getElementById("vue-filters"),t=document.getElementById("vue-tableau");if(!v&&!t){console.warn("[velogrimpe] No mount points found for tableau");return}const o=Ve(),_=R(o);if(window.__TABLEAU_DATA__?(_.initialize(window.__TABLEAU_DATA__),console.log("[velogrimpe] Tableau store initialized with",window.__TABLEAU_DATA__.falaises.length,"falaises")):console.warn("[velogrimpe] No tableau data found on window.__TABLEAU_DATA__"),v){const m=le(Bs);m.use(o),m.mount(v),console.log("[velogrimpe] Vue tableau filters mounted")}if(t){const m=le(jt);m.use(o),m.mount(t),console.log("[velogrimpe] Vue tableau list mounted")}});
