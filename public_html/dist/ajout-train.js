import{k as p,r as f,M as v}from"./chunks/runtime-dom.esm-bundler-Cpy2cnzk.js";import{_ as E}from"./chunks/FormAutocomplete.vue_vue_type_script_setup_true_lang-DCBUFmHv.js";import"./chunks/Autocomplete.vue_vue_type_script_setup_true_lang-yCm09Fm9.js";document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("vue-ajout-train");if(!o){console.warn("[velogrimpe] #vue-ajout-train mount point not found");return}let d=[],l=null;try{d=JSON.parse(o.dataset.gares||"[]"),l=o.dataset.presetGareNom||null}catch(n){console.error("[velogrimpe] Failed to parse ajout-train data:",n)}const r=()=>{const n=document.getElementById("gare_id"),i=document.getElementById("ville_id"),t=document.getElementById("train_tgv"),e=document.getElementById("submitBtn"),c=(n==null?void 0:n.value)||"",m=(i==null?void 0:i.value)||"",u=(t==null?void 0:t.checked)??!1;if(!c||!m){const a=document.getElementById("itineraireExistsAlert");a&&a.classList.add("hidden");return}fetch(`/api/verify_train_dup.php?gare_id=${c}&ville_id=${m}&train_tgv=${u?1:0}`).then(a=>a.json()).then(a=>{const s=document.getElementById("itineraireExistsAlert"),g=document.getElementById("itineraireExistsType");a?(s&&s.classList.remove("hidden"),g&&(g.textContent=u?"TGV":"TER"),e&&(e.disabled=!0)):(s&&s.classList.add("hidden"),e&&(e.disabled=!1))})};p({setup(){const n=f(l||""),i=t=>{const e=document.getElementById("gare_id");t?(e&&(e.value=String(t.id)),r()):e&&(e.value="")};return setTimeout(()=>{const t=document.getElementById("ville_id"),e=document.getElementById("train_tgv");t==null||t.addEventListener("change",r),e==null||e.addEventListener("change",r)},0),()=>v(E,{modelValue:n.value,"onUpdate:modelValue":t=>{n.value=t},items:d,onSelect:i})}}).mount(o),console.log("[velogrimpe] Vue ajout-train autocomplete mounted")});
