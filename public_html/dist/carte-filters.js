import{r as $,d as x,c as u,o as p,a as e,F as y,b as _,e as k,t as g,f as m,w as b,v as V,u as w,n as T,g as v,h as M,i as c,j as C,k as N}from"./chunks/runtime-dom.esm-bundler-Cpy2cnzk.js";import{d as S,c as F}from"./chunks/pinia-tyDBewVq.js";import{u as f}from"./chunks/filters-NV6T0Zig.js";import{_ as O}from"./chunks/Icon.vue_vue_type_script_setup_true_lang-4vtFu57H.js";const h=S("falaises",()=>{const r=$([]),i=$([]),a=$([]),l=$(!1);function n(o){r.value=o.falaises,i.value=o.gares,a.value=o.villes,l.value=!0}return{falaises:r,gares:i,villes:a,isInitialized:l,initialize:n}}),E={class:"flex flex-col gap-2"},P={class:"flex flex-row gap-1 items-center ml-4"},A={class:"max-w-96 grid grid-cols-[auto_auto] md:grid-cols-[auto] gap-x-2 md:gap-y-1"},U=["checked","onChange"],j={class:"label-text"},D={class:"text-xs text-slate-400"},I=x({__name:"ExpositionFilter",setup(r){const i=f(),a=[{id:"N",label:"Nord",hint:"(NO, N, NE)"},{id:"E",label:"Est",hint:"(NE, E, SE)"},{id:"S",label:"Sud",hint:"(SE, S, SO)"},{id:"O",label:"Ouest",hint:"(SO, O, NO)"}];function l(o){return i.filters.exposition.includes(o)}function n(o){i.toggleExposition(o)}return(o,t)=>(p(),u("div",E,[t[2]||(t[2]=e("div",null,"• Je veux une falaise exposée",-1)),e("div",P,[t[1]||(t[1]=e("div",{class:"h-20 flex items-center w-3"},[e("div",{class:"h-full bg-base-300 rounded-full w-1 relative"},[e("div",{class:"absolute top-1/2 -translate-x-1/2 -translate-y-1/2 left-1/2 bg-base-100 rounded-full w-6 h-6 border-2 border-base-300 flex items-center justify-center text-xs text-slate-600 font-bold"}," OU ")])],-1)),e("div",A,[(p(),u(y,null,_(a,s=>e("label",{key:s.id,class:"label cursor-pointer justify-start gap-x-2 py-0"},[e("input",{type:"checkbox",checked:l(s.id),class:"checkbox checkbox-primary checkbox-sm",onChange:d=>n(s.id)},null,40,U),e("span",j,[k(g(s.label)+" ",1),t[0]||(t[0]=e("br",{class:"md:hidden"},null,-1)),e("span",D,g(s.hint),1)])])),64))])])]))}}),z={class:"flex flex-col gap-2"},B={class:"label cursor-pointer gap-2 p-0 pr-1 w-full justify-start"},J=["value"],L=x({__name:"NbVoiesFilter",setup(r){const i=f(),a=[{value:0,label:"Pas de minimum"},{value:20,label:"Plus de 20"},{value:50,label:"Plus de 50"},{value:100,label:"Plus de 100"},{value:200,label:"Plus de 200"}],l=m({get:()=>i.filters.nbVoiesMin,set:n=>i.setNbVoiesMin(n)});return(n,o)=>(p(),u("div",z,[o[1]||(o[1]=e("div",null,"• Nombre de voies",-1)),e("div",null,[e("label",B,[b(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>l.value=t),class:"select select-xs select-primary focus:outline-base-300"},[(p(),u(y,null,_(a,t=>e("option",{key:t.value,value:t.value},g(t.label),9,J)),64))],512),[[V,l.value,void 0,{number:!0}]])])])]))}}),G={class:"flex flex-col gap-2"},R={class:"flex flex-row md:flex-col gap-3 items-center md:justify-center md:items-start ml-4 md:w-fit"},q={class:"max-w-96 md:flex flex-row grid grid-cols-[auto_auto_auto_auto] gap-x-[10px] gap-y-2 md:justify-between md:w-full"},H=["checked","onChange"],K={class:"label-text"},Q=x({__name:"CotationFilter",setup(r){const i=f(),a=[{id:"40",label:"≤4"},{id:"50",label:"5-"},{id:"59",label:"5+"},{id:"60",label:"6-"},{id:"69",label:"6+"},{id:"70",label:"7-"},{id:"79",label:"7+"},{id:"80",label:"≥8"}];function l(o){return i.filters.cotations.includes(o)}function n(o){i.toggleCotation(o)}return(o,t)=>(p(),u("div",G,[t[1]||(t[1]=e("div",null,[k(" • Je veux des cotations dans le "),e("br"),e("span",{class:"italic text-base-300 text-sm"},"(5- = de 5a à 5b, 5+ = de 5b+ à 5c+)")],-1)),e("div",R,[t[0]||(t[0]=e("div",{class:"flex items-center h-16 md:h-full md:w-full w-3"},[e("div",{class:"h-full md:w-full bg-base-300 rounded-full md:h-1 w-1 relative"},[e("div",{class:"absolute top-1/2 -translate-x-1/2 -translate-y-1/2 left-1/2 bg-base-100 rounded-full w-6 h-6 border-2 border-base-300 flex items-center justify-center text-xs text-slate-600 font-bold"}," ET ")])],-1)),e("div",q,[(p(),u(y,null,_(a,s=>e("label",{key:s.id,class:"label cursor-pointer md:flex-col gap-y-2 w-12 md:w-4 py-0"},[e("input",{type:"checkbox",checked:l(s.id),class:"checkbox checkbox-primary checkbox-sm",onChange:d=>n(s.id)},null,40,H),e("span",K,g(s.label),1)])),64))])])]))}}),W={class:"flex flex-col gap-2"},X={class:"flex flex-row gap-1 items-center ml-4"},Y={class:"max-w-96 grid grid-cols-[auto_auto] md:grid-cols-[auto] gap-x-2 gap-y-2 md:gap-y-1"},Z=["checked","onChange"],ee={class:"label-text"},se=x({__name:"TypeVoiesFilter",setup(r){const i=f(),a=[{id:"couenne",label:"Couenne"},{id:"grandeVoie",label:"Grande Voie"},{id:"bloc",label:"Bloc"},{id:"psychobloc",label:"Psychobloc"}];function l(o){return i.filters.typeVoies[o]}function n(o){i.setTypeVoie(o,!i.filters.typeVoies[o])}return(o,t)=>(p(),u("div",W,[t[1]||(t[1]=e("div",null,"• Pour faire :",-1)),e("div",X,[t[0]||(t[0]=e("div",{class:"h-16 md:h-20 flex items-center w-3"},[e("div",{class:"h-full bg-base-300 rounded-full w-1 relative"},[e("div",{class:"absolute top-1/2 -translate-x-1/2 -translate-y-1/2 left-1/2 bg-base-100 rounded-full w-6 h-6 border-2 border-base-300 flex items-center justify-center text-xs text-slate-600 font-bold"}," OU ")])],-1)),e("div",Y,[(p(),u(y,null,_(a,s=>e("label",{key:s.id,class:"label cursor-pointer justify-start gap-x-2 py-0"},[e("input",{type:"checkbox",checked:l(s.id),class:"checkbox checkbox-primary checkbox-sm",onChange:d=>n(s.id)},null,40,Z),e("span",ee,g(s.label),1)])),64))])])]))}}),te={class:"flex flex-row gap-2"},le=["value"],oe=x({__name:"VilleSelect",setup(r){const i=f(),a=h(),l=m({get:()=>i.filters.villeId??"-1",set:n=>{i.setVilleId(n==="-1"?null:n)}});return(n,o)=>(p(),u("div",te,[o[2]||(o[2]=e("div",{class:"font-bold"},"• Au départ de",-1)),b(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>l.value=t),class:"select select-primary select-xs w-32"},[o[1]||(o[1]=e("option",{value:"-1"},"Choisir Ville",-1)),(p(!0),u(y,null,_(w(a).villes,t=>(p(),u("option",{key:t.ville_id,value:t.ville_id},g(t.ville_nom),9,le))),128))],512),[[V,l.value]])]))}}),ie={class:"flex flex-row gap-2 items-center"},ne=["disabled"],ae={class:"flex flex-row items-center gap-1 ml-2"},re={class:"flex flex-row gap-2 items-center"},de={class:"label cursor-pointer gap-1"},ue=["checked","disabled"],pe={class:"label cursor-pointer gap-1"},me=["checked","disabled"],be={class:"label cursor-pointer gap-1"},ce=["checked","disabled"],xe={class:"label cursor-pointer gap-2 ml-2 justify-start py-0"},fe=["disabled"],ve=x({__name:"TrainFilter",setup(r){const i=f(),a=m({get:()=>i.filters.train.tempsMax??"",set:t=>{i.setTrainTempsMax(t===""?null:Number(t))}}),l=m({get:()=>i.filters.train.correspMax,set:t=>i.setTrainCorrespMax(t)}),n=m({get:()=>i.filters.train.terOnly,set:t=>i.setTrainTerOnly(t)}),o=m(()=>!i.hasVilleSelected);return(t,s)=>(p(),u("div",{class:T(["flex flex-col gap-2",{"opacity-30":o.value}])},[e("div",ie,[s[5]||(s[5]=e("div",{class:"font-bold"},"• Train (T)",-1)),s[6]||(s[6]=e("div",{class:"text-normal font-bold"},"≤",-1)),b(e("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=d=>a.value=d),step:"1",min:"0",class:"input input-primary input-xs w-10",disabled:o.value},null,8,ne),[[v,a.value]]),s[7]||(s[7]=e("div",null,"minutes",-1))]),e("div",ae,[s[11]||(s[11]=e("div",null,"Nb. Corresp.",-1)),e("div",re,[e("label",de,[e("input",{type:"radio",name:"nbCorrespMax",checked:l.value===0,class:"radio radio-primary radio-xs",disabled:o.value,onChange:s[1]||(s[1]=d=>l.value=0)},null,40,ue),s[8]||(s[8]=e("span",{class:"label-text"},"0",-1))]),e("label",pe,[e("input",{type:"radio",name:"nbCorrespMax",checked:l.value===1,class:"radio radio-primary radio-xs",disabled:o.value,onChange:s[2]||(s[2]=d=>l.value=1)},null,40,me),s[9]||(s[9]=e("span",{class:"label-text"},"≤1",-1))]),e("label",be,[e("input",{type:"radio",name:"nbCorrespMax",checked:l.value===null,class:"radio radio-primary radio-xs",disabled:o.value,onChange:s[3]||(s[3]=d=>l.value=null)},null,40,ce),s[10]||(s[10]=e("span",{class:"label-text"},"Illimité",-1))])])]),e("label",xe,[b(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=d=>n.value=d),class:"checkbox checkbox-primary checkbox-sm",disabled:o.value},null,8,fe),[[M,n.value]]),s[12]||(s[12]=e("span",{class:"label-text"},"TER uniquement (pas de TGV)",-1))])],2))}}),ge={class:"flex flex-col gap-2"},ye={class:"flex flex-row gap-2 items-center"},_e={class:"flex flex-row gap-2 items-center ml-2"},$e={class:"flex flex-row gap-2 items-center ml-2"},we={class:"label cursor-pointer gap-2 ml-2 justify-start py-0"},ke=x({__name:"VeloFilter",setup(r){const i=f(),a=m({get:()=>i.filters.velo.tempsMax??"",set:t=>{i.setVeloTempsMax(t===""?null:Number(t))}}),l=m({get:()=>i.filters.velo.distMax??"",set:t=>{i.setVeloDistMax(t===""?null:Number(t))}}),n=m({get:()=>i.filters.velo.denivMax??"",set:t=>{i.setVeloDenivMax(t===""?null:Number(t))}}),o=m({get:()=>i.filters.velo.apiedPossible,set:t=>i.setVeloApiedPossible(t)});return(t,s)=>(p(),u("div",ge,[e("div",ye,[s[4]||(s[4]=e("div",{class:"font-bold"},"• Vélo (V)",-1)),s[5]||(s[5]=e("div",{class:"text-normal font-bold"},"≤",-1)),b(e("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=d=>a.value=d),step:"1",min:"0",class:"input input-primary input-xs w-10"},null,512),[[v,a.value]]),s[6]||(s[6]=e("div",null,"min.",-1))]),e("div",_e,[s[7]||(s[7]=e("div",null,"Distance",-1)),s[8]||(s[8]=e("div",{class:"text-normal font-bold"},"≤",-1)),b(e("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=d=>l.value=d),step:"1",min:"0",class:"input input-primary input-xs w-10"},null,512),[[v,l.value]]),s[9]||(s[9]=e("div",null,"km",-1))]),e("div",$e,[s[10]||(s[10]=e("div",null,"Dénivelé",-1)),s[11]||(s[11]=e("div",{class:"text-normal font-bold"},"≤",-1)),b(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=d=>n.value=d),step:"1",min:"0",class:"input input-primary input-xs w-10"},null,512),[[v,n.value]]),s[12]||(s[12]=e("div",null,"m D+",-1))]),e("label",we,[b(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=d=>o.value=d),class:"checkbox checkbox-primary checkbox-sm"},null,512),[[M,o.value]]),s[13]||(s[13]=e("span",{class:"label-text"},"Accessible à pied",-1))])]))}}),Ve={class:"flex flex-row gap-2 items-center"},Te=x({__name:"ApprocheFilter",setup(r){const i=f(),a=m({get:()=>i.filters.approche.tempsMax??"",set:l=>{i.setApprocheTempsMax(l===""?null:Number(l))}});return(l,n)=>(p(),u("div",Ve,[n[1]||(n[1]=e("div",{class:"font-bold"},"• Marche d'approche (A)",-1)),n[2]||(n[2]=e("div",{class:"text-normal font-bold"},"≤",-1)),b(e("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=o=>a.value=o),step:"1",min:"0",class:"input input-primary input-xs w-10"},null,512),[[v,a.value]]),n[3]||(n[3]=e("div",null,"min.",-1))]))}}),Me={class:"flex flex-row gap-2 items-center"},he=["disabled"],Ce={class:"flex flex-row gap-2 items-center"},Ne=["disabled"],Se=x({__name:"TotalFilter",setup(r){const i=f(),a=m({get:()=>i.filters.total.tempsTV??"",set:o=>{i.setTotalTempsTV(o===""?null:Number(o))}}),l=m({get:()=>i.filters.total.tempsTVA??"",set:o=>{i.setTotalTempsTVA(o===""?null:Number(o))}}),n=m(()=>!i.hasVilleSelected);return(o,t)=>(p(),u("div",{class:T(["flex flex-col gap-2",{"opacity-30":n.value}])},[e("div",Me,[t[2]||(t[2]=e("div",{class:"font-bold"},"• Total T+V",-1)),t[3]||(t[3]=e("div",{class:"text-normal font-bold"},"≤",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s),step:"1",min:"0",class:"input input-primary input-xs w-10",disabled:n.value},null,8,he),[[v,a.value]]),t[4]||(t[4]=e("div",null,"min.",-1))]),e("div",Ce,[t[5]||(t[5]=e("div",{class:"font-bold"},"• Total T+V+A",-1)),t[6]||(t[6]=e("div",{class:"text-normal font-bold"},"≤",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),step:"1",min:"0",class:"input input-primary input-xs w-10",disabled:n.value},null,8,Ne),[[v,l.value]]),t[7]||(t[7]=e("div",null,"min.",-1))])],2))}}),Fe={class:"flex flex-col gap-2"},Oe={class:"flex flex-col gap-2"},Ee={class:"flex flex-col gap-2"},Pe={class:"flex flex-col gap-2"},Ae={class:"mt-2"},Ue=["disabled"],je=x({__name:"FilterPanel",setup(r){const i=f();return(a,l)=>(p(),u("form",{class:"flex flex-col gap-2 text-sm",onSubmit:l[1]||(l[1]=C(()=>{},["prevent"]))},[e("div",Fe,[l[2]||(l[2]=e("div",null,[e("b",{class:"text-primary text-base"},"Falaise")],-1)),e("div",Oe,[c(I),c(L),c(Q),c(se)])]),l[6]||(l[6]=e("hr",{class:"border-t border-base-300 my-1"},null,-1)),e("div",Ee,[l[3]||(l[3]=e("div",{class:"md:mt-2 flex flex-row gap-1"},[e("div",null,[e("b",{class:"text-primary text-base"},"Accès")])],-1)),c(oe),c(ve),c(ke),c(Te)]),l[7]||(l[7]=e("hr",{class:"border-t border-base-300 my-1"},null,-1)),e("div",Pe,[l[4]||(l[4]=e("div",null,[e("b",{class:"text-primary text-base"},"Temps total")],-1)),c(Se)]),e("div",Ae,[e("button",{type:"button",class:"btn btn-sm btn-outline btn-primary w-full",disabled:!w(i).hasActiveFilters,onClick:l[0]||(l[0]=n=>w(i).resetFilters())},[c(O,{name:"refresh"}),l[5]||(l[5]=k(" Réinitialiser les filtres ",-1))],8,Ue)])],32))}});document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("vue-filters");if(!r){console.warn("[velogrimpe] #vue-filters mount point not found");return}const i=N(je),a=F();i.use(a);try{const l=JSON.parse(r.dataset.falaises||"[]"),n=JSON.parse(r.dataset.gares||"[]"),o=JSON.parse(r.dataset.villes||"[]");h(a).initialize({falaises:l,gares:n,villes:o}),console.log(`[velogrimpe] Initialized with ${l.length} falaises, ${n.length} gares, ${o.length} villes`)}catch(l){console.error("[velogrimpe] Failed to parse data from PHP:",l)}i.mount(r),console.log("[velogrimpe] Vue filters app mounted")});
