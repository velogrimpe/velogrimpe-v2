import{d as y,r as d,y as b,c as w,o as M,a as p,i as c,u as t,F as S,k as C}from"./chunks/runtime-dom.esm-bundler-DMen96Nq.js";import{c as E}from"./chunks/pinia-CZ5zk4qe.js";import{u as L,_ as P,a as V,b as B}from"./chunks/ToastContainer.vue_vue_type_script_setup_true_lang-D2lPXvdd.js";import"./chunks/useToast-WXSgTR13.js";import"./chunks/Icon.vue_vue_type_script_setup_true_lang-C9j0lfjA.js";const D={class:"card bg-base-100 shadow-lg"},$={class:"card-body"},F=y({__name:"SortieDetails",props:{sortie:{}},setup(e){const o=e,i=d([]),s=d(!1),{isParticipationModalOpen:a,dateDisplay:f,openParticipationModal:m,closeParticipationModal:_,copyLink:v,handleGroupLinkClick:g}=L(()=>o.sortie);async function k(l){s.value=!0;try{const r=await(await fetch(`/api/fetch_sortie_velos.php?falaise_id=${l}`)).json();r.success?i.value=r.velos:(console.error("Failed to fetch velo routes:",r.error),i.value=[])}catch(n){console.error("Error fetching velo routes:",n),i.value=[]}finally{s.value=!1}}function h(){window.location.reload()}return b(()=>{o.sortie.falaise_principale_id&&k(o.sortie.falaise_principale_id)}),(l,n)=>(M(),w(S,null,[p("div",D,[p("div",$,[c(P,{sortie:e.sortie,"date-display":t(f),"on-group-link-click":t(g),"on-participation-click":t(m),"on-copy-link":t(v)},null,8,["sortie","date-display","on-group-link-click","on-participation-click","on-copy-link"])])]),c(V,{sortie:e.sortie,"is-open":t(a),onClose:t(_),onSubmitted:h},null,8,["sortie","is-open","onClose"]),c(B)],64))}});function u(){const e=document.getElementById("vue-sortie-details");if(!e){console.warn("[velogrimpe] #vue-sortie-details mount point not found");return}const o=e.dataset.sortie;if(!o){console.error("[velogrimpe] Missing sortie data attribute");return}const i=JSON.parse(o),s=C(F,{sortie:i}),a=E();s.use(a),s.mount(e),console.log("[velogrimpe] Vue sortie details mounted")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();
