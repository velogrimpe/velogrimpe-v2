import{_ as p}from"./Autocomplete.vue_vue_type_script_setup_true_lang-DITvEN9E.js";import{_}from"./Icon.vue_vue_type_script_setup_true_lang-CxRcsHEs.js";import{d as g,D as i,r as v,E as V,f as h,q as $,o as w,G as x,i as k}from"./runtime-dom.esm-bundler-CFjh9Irh.js";const M=g({__name:"SearchAutocomplete",props:i({falaises:{},gares:{}},{modelValue:{default:""},modelModifiers:{}}),emits:i(["select"],["update:modelValue"]),setup(s,{expose:m,emit:r}){const t=s,c=r,l=v(null),n=V(s,"modelValue");function u(){var a;(a=l.value)==null||a.focus()}m({focus:u});const d=h(()=>{const a=t.falaises.map(e=>({value:`${e.falaise_nom} (falaise)`,label:`${e.falaise_nom} (falaise)`,data:{id:e.falaise_id,type:"falaise",name:e.falaise_nom}})),o=t.gares.map(e=>({value:`${e.gare_nom} (gare)`,label:`${e.gare_nom} (gare)`,data:{id:e.gare_id,type:"gare",name:e.gare_nom}}));return[...a,...o]});function f(a){if(a.data){const o=a.data;c("select",o),window.dispatchEvent(new CustomEvent("velogrimpe:search-select",{detail:o}))}}return(a,o)=>(w(),$(p,{ref_key:"autocompleteRef",ref:l,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),options:d.value,placeholder:"falaise/gare",onSelect:f},{icon:x(()=>[k(_,{name:"search",class:"w-4 h-4"})]),_:1},8,["modelValue","options"]))}});export{M as _};
