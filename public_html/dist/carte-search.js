import{d,p as i,q as p,f as u,s as f,o as g,x as _,i as v,k as h}from"./chunks/runtime-dom.esm-bundler-CHpZyyPM.js";import{_ as V}from"./chunks/Autocomplete.vue_vue_type_script_setup_true_lang-XFUCGgyG.js";import{_ as w}from"./chunks/Icon.vue_vue_type_script_setup_true_lang-Dfo531fH.js";const $=d({__name:"SearchAutocomplete",props:i({falaises:{},gares:{}},{modelValue:{default:""},modelModifiers:{}}),emits:i(["select"],["update:modelValue"]),setup(a,{emit:l}){const t=a,r=l,n=p(a,"modelValue"),m=u(()=>{const s=t.falaises.map(e=>({value:`${e.falaise_nom} (falaise)`,label:`${e.falaise_nom} (falaise)`,data:{id:e.falaise_id,type:"falaise",name:e.falaise_nom}})),o=t.gares.map(e=>({value:`${e.gare_nom} (gare)`,label:`${e.gare_nom} (gare)`,data:{id:e.gare_id,type:"gare",name:e.gare_nom}}));return[...s,...o]});function c(s){if(s.data){const o=s.data;r("select",o),window.dispatchEvent(new CustomEvent("velogrimpe:search-select",{detail:o}))}}return(s,o)=>(g(),f(V,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),options:m.value,placeholder:"falaise/gare",onSelect:c},{icon:_(()=>[v(w,{name:"search",class:"w-4 h-4"})]),_:1},8,["modelValue","options"]))}});document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("vue-search");if(!a){console.warn("[velogrimpe] #vue-search mount point not found");return}let l=[],t=[];try{l=JSON.parse(a.dataset.falaises||"[]"),t=JSON.parse(a.dataset.gares||"[]")}catch(n){console.error("[velogrimpe] Failed to parse search data:",n)}h($,{falaises:l,gares:t}).mount(a),console.log("[velogrimpe] Vue search autocomplete mounted")});
