import{d as p,p as i,q as u,f,s as g,o as v,x as h,a as m,k as _}from"./chunks/runtime-dom.esm-bundler-CJEmteaZ.js";import{_ as V}from"./chunks/Autocomplete.vue_vue_type_script_setup_true_lang-CXcb2hBC.js";const w=p({__name:"SearchAutocomplete",props:i({falaises:{},gares:{}},{modelValue:{default:""},modelModifiers:{}}),emits:i(["select"],["update:modelValue"]),setup(s,{emit:l}){const o=s,r=l,n=u(s,"modelValue"),d=f(()=>{const t=o.falaises.map(e=>({value:`${e.falaise_nom} (falaise)`,label:`${e.falaise_nom} (falaise)`,data:{id:e.falaise_id,type:"falaise",name:e.falaise_nom}})),a=o.gares.map(e=>({value:`${e.gare_nom} (gare)`,label:`${e.gare_nom} (gare)`,data:{id:e.gare_id,type:"gare",name:e.gare_nom}}));return[...t,...a]});function c(t){if(t.data){const a=t.data;r("select",a),window.dispatchEvent(new CustomEvent("velogrimpe:search-select",{detail:a}))}}return(t,a)=>(v(),g(V,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),options:d.value,placeholder:"falaise/gare",onSelect:c},{icon:h(()=>[...a[1]||(a[1]=[m("svg",{class:"w-4 h-4 fill-none stroke-current shrink-0"},[m("use",{href:"#search"})],-1)])]),_:1},8,["modelValue","options"]))}});document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("vue-search");if(!s){console.warn("[velogrimpe] #vue-search mount point not found");return}let l=[],o=[];try{l=JSON.parse(s.dataset.falaises||"[]"),o=JSON.parse(s.dataset.gares||"[]")}catch(n){console.error("[velogrimpe] Failed to parse search data:",n)}_(w,{falaises:l,gares:o}).mount(s),console.log("[velogrimpe] Vue search autocomplete mounted")});
